const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/esp32-D9Bry5AK-C5_7PDVi.js","assets/rom-B2LvkjpK-f2JiXiqJ.js","assets/esp32c2-CQCa5GlD-CPV-qOfO.js","assets/esp32c3-B4sqWMZf-CImjvWL6.js","assets/esp32c6-DxAEWmNf-S0EuYfVC.js","assets/esp32c61-B5KEiyDP-CqwXT9mn.js","assets/esp32c5-BA5SOTBL-DR6O3DnE.js","assets/esp32h2-Bm3EZXXU-DY6-bP1c.js","assets/esp32s3-CX2uHP4t-DYWzCR4W.js","assets/esp32s2-cKIjfSdO-DzTstvmK.js","assets/esp8266-DEFNY3lv-BiL7g1T8.js","assets/esp32p4-B0KJRj5I-CQsQAWiP.js"])))=>i.map(i=>d[i]);
import{_ as it}from"./index-nvDRnQad.js";import{t as h,n as M,V as Dt,d as B,v,g as Y,i as eo,m as O,q as io,b as At,f as gr,j as b,c as ro,h as Fe,a as A,R as ot,e as oo,G as ao,Y as so,o as bi,k as Q,F as Pt,W as Ue,l as _r,I as Kt,T as br,O as no,p as yr,P as Tt,r as jt}from"./styles-4vRXDqF6-DNN5PNIW.js";import"./__commonjsHelpers__-CZnAS8i4.js";let Ai;function xr(i,e=gt){const t=yi(i,e);return t&&(t.tabIndex=0,t.focus()),t}function wr(i,e=gt){const t=kr(i,e);return t&&(t.tabIndex=0,t.focus()),t}function Jt(i,e=gt){for(let t=0;t<i.length;t++){const r=i[t];if(r.tabIndex===0&&e(r))return{item:r,index:t}}return null}function yi(i,e=gt){for(const t of i)if(e(t))return t;return null}function kr(i,e=gt){for(let t=i.length-1;t>=0;t--){const r=i[t];if(e(r))return r}return null}function Ri(i,e,t=gt){if(e){const r=function(o,a,s=gt){for(let n=1;n<o.length;n++){const d=o[(n+a)%o.length];if(s(d))return d}return o[a]?o[a]:null}(i,e.index,t);return r&&(r.tabIndex=0,r.focus()),r}return xr(i,t)}function Ti(i,e,t=gt){if(e){const r=function(o,a,s=gt){for(let n=1;n<o.length;n++){const d=o[(a-n+o.length)%o.length];if(s(d))return d}return o[a]?o[a]:null}(i,e.index,t);return r&&(r.tabIndex=0,r.focus()),r}return wr(i,t)}function gt(i){return!i.disabled}const q={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class Er{constructor(e){this.handleKeydown=l=>{const c=l.key;if(l.defaultPrevented||!this.isNavigableKey(c))return;const _=this.items;if(!_.length)return;const f=Jt(_,this.isActivatable);f&&(f.item.tabIndex=-1),l.preventDefault();const p=this.isRtl();switch(c){case q.ArrowDown:case(p?q.ArrowLeft:q.ArrowRight):Ri(_,f,this.isActivatable);break;case q.ArrowUp:case(p?q.ArrowRight:q.ArrowLeft):Ti(_,f,this.isActivatable);break;case q.Home:xr(_,this.isActivatable);break;case q.End:wr(_,this.isActivatable)}},this.onDeactivateItems=()=>{const l=this.items;for(const c of l)this.deactivateItem(c)},this.onRequestActivation=l=>{this.onDeactivateItems();const c=l.target;this.activateItem(c),c.focus()},this.onSlotchange=()=>{const l=this.items;let c=!1;for(const f of l)!(!f.disabled&&f.tabIndex>-1)||c?f.tabIndex=-1:(c=!0,f.tabIndex=0);if(c)return;const _=yi(l,this.isActivatable);_&&(_.tabIndex=0)};const{isItem:t,getPossibleItems:r,isRtl:o,deactivateItem:a,activateItem:s,isNavigableKey:n,isActivatable:d}=e;this.isItem=t,this.getPossibleItems=r,this.isRtl=o,this.deactivateItem=a,this.activateItem=s,this.isNavigableKey=n,this.isActivatable=d}get items(){const e=this.getPossibleItems(),t=[];for(const r of e){if(this.isItem(r)){t.push(r);continue}const o=r.item;o&&this.isItem(o)&&t.push(o)}return t}activateNextItem(){const e=this.items,t=Jt(e,this.isActivatable);return t&&(t.item.tabIndex=-1),Ri(e,t,this.isActivatable)}activatePreviousItem(){const e=this.items,t=Jt(e,this.isActivatable);return t&&(t.item.tabIndex=-1),Ti(e,t,this.isActivatable)}}const lo=new Set(Object.values(q));class Sr extends B{get items(){return this.listController.items}constructor(){super(),this.listController=new Er({isItem:e=>e.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.tabIndex=-1},activateItem:e=>{e.tabIndex=0},isNavigableKey:e=>lo.has(e),isActivatable:e=>!e.disabled&&e.type!=="text"}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return b`
      <slot
        @deactivate-items=${this.listController.onDeactivateItems}
        @request-activation=${this.listController.onRequestActivation}
        @slotchange=${this.listController.onSlotchange}>
      </slot>
    `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}h([At({flatten:!0})],Sr.prototype,"slotItems",void 0);const co=M`:host{background:var(--md-list-container-color, var(--md-sys-color-surface, #fef7ff));color:unset;display:flex;flex-direction:column;outline:none;padding:8px 0;position:relative}/*# sourceMappingURL=list-styles.css.map */
`;class Ci extends Sr{}Ci.styles=[co],customElements.define("ew-list",Ci);class hi extends B{constructor(){super(...arguments),this.multiline=!1}render(){return b`
      <slot name="container"></slot>
      <slot class="non-text" name="start"></slot>
      <div class="text">
        <slot name="overline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          class="default-slot"
          @slotchange=${this.handleTextSlotChange}></slot>
        <slot name="headline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          name="supporting-text"
          @slotchange=${this.handleTextSlotChange}></slot>
      </div>
      <slot class="non-text" name="trailing-supporting-text"></slot>
      <slot class="non-text" name="end"></slot>
    `}handleTextSlotChange(){let e=!1,t=0;for(const r of this.textSlots)if(ho(r)&&(t+=1),t>1){e=!0;break}this.multiline=e}}function ho(i){for(const t of i.assignedNodes({flatten:!0})){var e;const r=t.nodeType===Node.ELEMENT_NODE,o=t.nodeType===Node.TEXT_NODE&&((e=t.textContent)===null||e===void 0?void 0:e.match(/\S/));if(r||o)return!0}return!1}h([v({type:Boolean,reflect:!0})],hi.prototype,"multiline",void 0),h([function(i){return(e,t)=>gr(e,t,{get(){return(this.renderRoot??Ai??(Ai=document.createDocumentFragment())).querySelectorAll(i)}})}(".text slot")],hi.prototype,"textSlots",void 0);const po=M`:host{color:var(--md-sys-color-on-surface, #1d1b20);font-family:var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-large-size, 1rem);font-weight:var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-large-line-height, 1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-medium-size, 0.875rem);font-weight:var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-medium-line-height, 1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}/*# sourceMappingURL=item-styles.css.map */
`;let We=class extends hi{};We.styles=[po],We=h([Fe("md-item")],We);const Ar=Symbol.for(""),uo=i=>{if((i==null?void 0:i.r)===Ar)return i==null?void 0:i._$litStatic$},wt=(i,...e)=>({_$litStatic$:e.reduce((t,r,o)=>t+(a=>{if(a._$litStatic$!==void 0)return a._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${a}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+i[o+1],i[0]),r:Ar}),Ii=new Map,Me=(i=>(e,...t)=>{const r=t.length;let o,a;const s=[],n=[];let d,l=0,c=!1;for(;l<r;){for(d=e[l];l<r&&(a=t[l],(o=uo(a))!==void 0);)d+=o+e[++l],c=!0;l!==r&&n.push(a),s.push(d),l++}if(l===r&&s.push(e[r]),c){const _=s.join("$$lit$$");(e=Ii.get(_))===void 0&&(s.raw=s,Ii.set(_,e=s)),t=n}return i(e,...t)})(b);class pt extends B{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&this.type!=="link"}willUpdate(e){this.href&&(this.type="link"),super.willUpdate(e)}render(){return this.renderListItem(b`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){const t=this.type==="link";let r;switch(this.type){case"link":r=wt`a`;break;case"button":r=wt`button`;break;default:r=wt`li`}const o=this.type!=="text",a=t&&this.target?this.target:A;return Me`
      <${r}
        id="item"
        tabindex="${this.isDisabled||!o?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||A}
        aria-checked=${this.ariaChecked||A}
        aria-expanded=${this.ariaExpanded||A}
        aria-haspopup=${this.ariaHasPopup||A}
        class="list-item ${ot(this.getRenderClasses())}"
        href=${this.href||A}
        target=${a}
        @focus=${this.onFocus}
      >${e}</${r}>
    `}renderRipple(){return this.type==="text"?A:b` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.isDisabled}></md-ripple>`}renderFocusRing(){return this.type==="text"?A:b` <md-focus-ring
      @visibility-changed=${this.onFocusRingVisibilityChanged}
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}onFocusRingVisibilityChanged(e){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return b`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}onFocus(){this.tabIndex===-1&&this.dispatchEvent(new Event("request-activation",{bubbles:!0,composed:!0}))}focus(){var e;(e=this.listItemRoot)===null||e===void 0||e.focus()}}Dt(pt),pt.shadowRootOptions={...B.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],pt.prototype,"disabled",void 0),h([v({reflect:!0})],pt.prototype,"type",void 0),h([v({type:Boolean,attribute:"md-list-item",reflect:!0})],pt.prototype,"isListItem",void 0),h([v()],pt.prototype,"href",void 0),h([v()],pt.prototype,"target",void 0),h([Y(".list-item")],pt.prototype,"listItemRoot",void 0);const fo=M`:host{display:flex;-webkit-tap-highlight-color:rgba(0,0,0,0);--md-ripple-hover-color: var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity, 0.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-list-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-list-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-list-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-list-item-one-line-container-height, 56px);padding-top:var(--md-list-item-top-space, 12px);padding-bottom:var(--md-list-item-bottom-space, 12px);padding-inline-start:var(--md-list-item-leading-space, 16px);padding-inline-end:var(--md-list-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-list-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-list-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}@media(forced-colors: active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}/*# sourceMappingURL=list-item-styles.css.map */
`;class $i extends pt{}$i.styles=[fo],customElements.define("ew-list-item",$i);class Li extends oo{}Li.styles=[eo],customElements.define("ew-divider",Li);const ne=Symbol("createValidator"),le=Symbol("getValidityAnchor"),Ve=Symbol("privateValidator"),ct=Symbol("privateSyncValidity"),ve=Symbol("privateCustomValidationMessage");function xi(i){var e;class t extends i{constructor(){super(...arguments),this[e]=""}get validity(){return this[ct](),this[Q].validity}get validationMessage(){return this[ct](),this[Q].validationMessage}get willValidate(){return this[ct](),this[Q].willValidate}checkValidity(){return this[ct](),this[Q].checkValidity()}reportValidity(){return this[ct](),this[Q].reportValidity()}setCustomValidity(o){this[ve]=o,this[ct]()}requestUpdate(o,a,s){super.requestUpdate(o,a,s),this[ct]()}firstUpdated(o){super.firstUpdated(o),this[ct]()}[(e=ve,ct)](){this[Ve]||(this[Ve]=this[ne]());const{validity:o,validationMessage:a}=this[Ve].getValidity(),s=!!this[ve],n=this[ve]||a;this[Q].setValidity({...o,customError:s},n,this[le]()??void 0)}[ne](){throw new Error("Implement [createValidator]")}[le](){throw new Error("Implement [getValidityAnchor]")}}return t}const Nt=Symbol("getFormValue"),pi=Symbol("getFormState");function wi(i){class e extends i{get form(){return this[Q].form}get labels(){return this[Q].labels}get name(){return this.getAttribute("name")??""}set name(r){this.setAttribute("name",r)}get disabled(){return this.hasAttribute("disabled")}set disabled(r){this.toggleAttribute("disabled",r)}attributeChangedCallback(r,o,a){if(r!=="name"&&r!=="disabled")super.attributeChangedCallback(r,o,a);else{const s=r==="disabled"?o!==null:o;this.requestUpdate(r,s)}}requestUpdate(r,o,a){super.requestUpdate(r,o,a),this[Q].setFormValue(this[Nt](),this[pi]())}[Nt](){throw new Error("Implement [getFormValue]")}[pi](){return this[Nt]()}formDisabledCallback(r){this.disabled=r}}return e.formAssociated=!0,h([v({noAccessor:!0})],e.prototype,"name",null),h([v({type:Boolean,noAccessor:!0})],e.prototype,"disabled",null),e}class ki{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:t,validationMessage:r}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:r,validity:{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing}},this.currentValidity}}class mo extends ki{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,t){return e.checked===t.checked&&e.required===t.required}copy({checked:e,required:t}){return{checked:e,required:t}}}const vo=xi(wi(Ue(B)));class rt extends vo{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",e=>{ao(e)&&this.input&&(this.focus(),so(this.input))})}update(e){(e.has("checked")||e.has("disabled")||e.has("indeterminate"))&&(this.prevChecked=e.get("checked")??this.checked,this.prevDisabled=e.get("disabled")??this.disabled,this.prevIndeterminate=e.get("indeterminate")??this.indeterminate),super.update(e)}render(){const e=!this.prevChecked&&!this.prevIndeterminate,t=this.prevChecked&&!this.prevIndeterminate,r=this.prevIndeterminate,o=this.checked&&!this.indeterminate,a=this.indeterminate,s=ot({disabled:this.disabled,selected:o||a,unselected:!o&&!a,checked:o,indeterminate:a,"prev-unselected":e,"prev-checked":t,"prev-indeterminate":r,"prev-disabled":this.prevDisabled}),{ariaLabel:n,ariaInvalid:d}=this;return b`
      <div class="container ${s}">
        <input
          type="checkbox"
          id="input"
          aria-checked=${a?"mixed":A}
          aria-label=${n||A}
          aria-invalid=${d||A}
          ?disabled=${this.disabled}
          ?required=${this.required}
          .indeterminate=${this.indeterminate}
          .checked=${this.checked}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <div class="outline"></div>
        <div class="background"></div>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <svg class="icon" viewBox="0 0 18 18" aria-hidden="true">
          <rect class="mark short" />
          <rect class="mark long" />
        </svg>
      </div>
    `}handleInput(e){const t=e.target;this.checked=t.checked,this.indeterminate=t.indeterminate}handleChange(e){bi(this,e)}[Nt](){return!this.checked||this.indeterminate?null:this.value}[pi](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked=e==="true"}[ne](){return new mo(()=>this)}[le](){return this.input}}Dt(rt),rt.shadowRootOptions={...B.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean})],rt.prototype,"checked",void 0),h([v({type:Boolean})],rt.prototype,"indeterminate",void 0),h([v({type:Boolean})],rt.prototype,"required",void 0),h([v()],rt.prototype,"value",void 0),h([O()],rt.prototype,"prevChecked",void 0),h([O()],rt.prototype,"prevDisabled",void 0),h([O()],rt.prototype,"prevIndeterminate",void 0),h([Y("input")],rt.prototype,"input",void 0);const go=M`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start, var(--md-checkbox-container-shape, 2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end, var(--md-checkbox-container-shape, 2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end, var(--md-checkbox-container-shape, 2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start, var(--md-checkbox-container-shape, 2px));display:inline-flex;height:var(--md-checkbox-container-size, 18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size, 18px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-checkbox-container-size, 18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:none;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.outline,.background,.icon{inset:0;position:absolute}.outline,.background{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color, var(--md-sys-color-on-surface-variant, #49454f));border-style:solid;border-width:var(--md-checkbox-outline-width, 2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color, var(--md-sys-color-primary, #6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15),linear;transform:scale(0.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape, 9999px);height:var(--md-checkbox-state-layer-size, 40px);inset:unset;width:var(--md-checkbox-state-layer-size, 40px);--md-ripple-hover-color: var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color: var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color, var(--md-sys-color-on-primary, #fff));height:var(--md-checkbox-icon-size, 18px);width:var(--md-checkbox-icon-size, 18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15);transition-duration:150ms;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1);transition-duration:350ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px, -14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px, -10px) rotate(0deg)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-hover-outline-width, 2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color, var(--md-sys-color-primary, #6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-focus-outline-width, 2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color, var(--md-sys-color-primary, #6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-pressed-outline-width, 2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color, var(--md-sys-color-primary, #6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-disabled-outline-width, 2px);opacity:var(--md-checkbox-disabled-container-opacity, 0.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity, 0.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color, var(--md-sys-color-surface, #fef7ff))}@media(forced-colors: active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}/*# sourceMappingURL=checkbox-styles.css.map */
`;class Oi extends rt{}Oi.styles=[go],customElements.define("ew-checkbox",Oi);class _o{constructor(e){this.targetElement=e,this.state={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null,carriageReturn:!1,secret:!1}}logs(){return this.targetElement.innerText}addLine(e){const t=/(?:\033|\\033)(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g;let r=0;this.state.carriageReturn&&(e!==`
`&&this.targetElement.removeChild(this.targetElement.lastChild),this.state.carriageReturn=!1),e.includes("\r")&&(this.state.carriageReturn=!0);const o=document.createElement("span");o.classList.add("line"),this.targetElement.appendChild(o);const a=n=>{if(n==="")return;const d=document.createElement("span");if(this.state.bold&&d.classList.add("log-bold"),this.state.italic&&d.classList.add("log-italic"),this.state.underline&&d.classList.add("log-underline"),this.state.strikethrough&&d.classList.add("log-strikethrough"),this.state.secret&&d.classList.add("log-secret"),this.state.foregroundColor!==null&&d.classList.add(`log-fg-${this.state.foregroundColor}`),this.state.backgroundColor!==null&&d.classList.add(`log-bg-${this.state.backgroundColor}`),d.appendChild(document.createTextNode(n)),o.appendChild(d),this.state.secret){const l=document.createElement("span");l.classList.add("log-secret-redacted"),l.appendChild(document.createTextNode("[redacted]")),o.appendChild(l)}};for(;;){const n=t.exec(e);if(n===null)break;const d=n.index;if(a(e.substring(r,d)),r=d+n[0].length,n[1]!==void 0)for(const l of n[1].split(";"))switch(parseInt(l)){case 0:this.state.bold=!1,this.state.italic=!1,this.state.underline=!1,this.state.strikethrough=!1,this.state.foregroundColor=null,this.state.backgroundColor=null,this.state.secret=!1;break;case 1:this.state.bold=!0;break;case 3:this.state.italic=!0;break;case 4:this.state.underline=!0;break;case 5:this.state.secret=!0;break;case 6:this.state.secret=!1;break;case 9:this.state.strikethrough=!0;break;case 22:this.state.bold=!1;break;case 23:this.state.italic=!1;break;case 24:this.state.underline=!1;break;case 29:this.state.strikethrough=!1;break;case 30:this.state.foregroundColor="black";break;case 31:this.state.foregroundColor="red";break;case 32:this.state.foregroundColor="green";break;case 33:this.state.foregroundColor="yellow";break;case 34:this.state.foregroundColor="blue";break;case 35:this.state.foregroundColor="magenta";break;case 36:this.state.foregroundColor="cyan";break;case 37:this.state.foregroundColor="white";break;case 39:this.state.foregroundColor=null;break;case 41:this.state.backgroundColor="red";break;case 42:this.state.backgroundColor="green";break;case 43:this.state.backgroundColor="yellow";break;case 44:this.state.backgroundColor="blue";break;case 45:this.state.backgroundColor="magenta";break;case 46:this.state.backgroundColor="cyan";break;case 47:this.state.backgroundColor="white";break;case 40:case 49:this.state.backgroundColor=null}}const s=this.targetElement.scrollTop>this.targetElement.scrollHeight-this.targetElement.offsetHeight-50;a(e.substring(r)),s&&(this.targetElement.scrollTop=this.targetElement.scrollHeight)}}const vt=i=>new Promise(e=>setTimeout(e,i));class bo{constructor(){this.chunks=""}transform(e,t){this.chunks+=e;const r=this.chunks.split(`\r
`);this.chunks=r.pop(),r.forEach(o=>t.enqueue(o+`\r
`))}flush(e){e.enqueue(this.chunks)}}class yo{transform(e,t){const r=new Date,o=r.getHours().toString().padStart(2,"0"),a=r.getMinutes().toString().padStart(2,"0"),s=r.getSeconds().toString().padStart(2,"0");t.enqueue(`[${o}:${a}:${s}]${e}`)}}class xo extends HTMLElement{constructor(){super(...arguments),this.allowInput=!0}logs(){var e;return((e=this._console)===null||e===void 0?void 0:e.logs())||""}connectedCallback(){if(this._console)return;if(this.attachShadow({mode:"open"}).innerHTML=`
      <style>
        :host, input {
          background-color: #1c1c1c;
          color: #ddd;
          font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
            monospace;
          line-height: 1.45;
          display: flex;
          flex-direction: column;
        }
        form {
          display: flex;
          align-items: center;
          padding: 0 8px 0 16px;
        }
        input {
          flex: 1;
          padding: 4px;
          margin: 0 8px;
          border: 0;
          outline: none;
        }
        
  .log {
    flex: 1;
    background-color: #1c1c1c;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
      monospace;
    font-size: 12px;
    padding: 16px;
    overflow: auto;
    line-height: 1.45;
    border-radius: 3px;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    color: #ddd;
  }

  .log-bold {
    font-weight: bold;
  }
  .log-italic {
    font-style: italic;
  }
  .log-underline {
    text-decoration: underline;
  }
  .log-strikethrough {
    text-decoration: line-through;
  }
  .log-underline.log-strikethrough {
    text-decoration: underline line-through;
  }
  .log-secret {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .log-secret-redacted {
    opacity: 0;
    width: 1px;
    font-size: 1px;
  }
  .log-fg-black {
    color: rgb(128, 128, 128);
  }
  .log-fg-red {
    color: rgb(255, 0, 0);
  }
  .log-fg-green {
    color: rgb(0, 255, 0);
  }
  .log-fg-yellow {
    color: rgb(255, 255, 0);
  }
  .log-fg-blue {
    color: rgb(0, 0, 255);
  }
  .log-fg-magenta {
    color: rgb(255, 0, 255);
  }
  .log-fg-cyan {
    color: rgb(0, 255, 255);
  }
  .log-fg-white {
    color: rgb(187, 187, 187);
  }
  .log-bg-black {
    background-color: rgb(0, 0, 0);
  }
  .log-bg-red {
    background-color: rgb(255, 0, 0);
  }
  .log-bg-green {
    background-color: rgb(0, 255, 0);
  }
  .log-bg-yellow {
    background-color: rgb(255, 255, 0);
  }
  .log-bg-blue {
    background-color: rgb(0, 0, 255);
  }
  .log-bg-magenta {
    background-color: rgb(255, 0, 255);
  }
  .log-bg-cyan {
    background-color: rgb(0, 255, 255);
  }
  .log-bg-white {
    background-color: rgb(255, 255, 255);
  }

      </style>
      <div class="log"></div>
      ${this.allowInput?`<form>
                >
                <input autofocus>
              </form>
            `:""}
    `,this._console=new _o(this.shadowRoot.querySelector("div")),this.allowInput){const r=this.shadowRoot.querySelector("input");this.addEventListener("click",()=>{var o;((o=getSelection())===null||o===void 0?void 0:o.toString())===""&&r.focus()}),r.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),o.stopPropagation(),this._sendCommand())})}const e=new AbortController,t=this._connect(e.signal);this._cancelConnection=()=>(e.abort(),t)}async _connect(e){this.logger.debug("Starting console read loop");try{await this.port.readable.pipeThrough(new TextDecoderStream,{signal:e}).pipeThrough(new TransformStream(new bo)).pipeThrough(new TransformStream(new yo)).pipeTo(new WritableStream({write:t=>{this._console.addLine(t.replace("\r",""))}})),e.aborted||(this._console.addLine(""),this._console.addLine(""),this._console.addLine("Terminal disconnected"))}catch(t){this._console.addLine(""),this._console.addLine(""),this._console.addLine(`Terminal disconnected: ${t}`)}finally{await vt(100),this.logger.debug("Finished console read loop")}}async _sendCommand(){const e=this.shadowRoot.querySelector("input"),t=e.value,r=new TextEncoder,o=this.port.writable.getWriter();await o.write(r.encode(t+`\r
`)),this._console.addLine(`> ${t}\r
`),e.value="",e.focus();try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}async disconnect(){this._cancelConnection&&(await this._cancelConnection(),this._cancelConnection=void 0)}async reset(){this.logger.debug("Triggering reset"),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await vt(250),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!1}),await vt(250),await new Promise(e=>setTimeout(e,1e3))}}function zi(i,e=!0){return e&&getComputedStyle(i).getPropertyValue("direction").trim()==="rtl"}customElements.define("ewt-console",xo);const wo=Ue(B);class V extends wo{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=zi(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Q].form}get labels(){return this[Q].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const e=this.href?wt`div`:wt`button`,{ariaLabel:t,ariaHasPopup:r,ariaExpanded:o}=this,a=t&&this.ariaLabelSelected,s=this.toggle?this.selected:A;let n=A;return this.href||(n=a&&this.selected?this.ariaLabelSelected:t),Me`<${e}
        class="icon-button ${ot(this.getRenderClasses())}"
        id="button"
        aria-label="${n||A}"
        aria-haspopup="${!this.href&&r||A}"
        aria-expanded="${!this.href&&o||A}"
        aria-pressed="${s}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?A:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():A}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return b`
      <a
        class="link"
        id="link"
        href="${this.href}"
        target="${this.target||A}"
        aria-label="${e||A}"></a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return b`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return b`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return b`<span class="touch"></span>`}renderFocusRing(){return b`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){return b`<md-ripple
      for=${this.href?"link":A}
      ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=zi(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(e){await 0,!this.toggle||this.disabled||e.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}Dt(V),io(V),V.formAssociated=!0,V.shadowRootOptions={mode:"open",delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],V.prototype,"disabled",void 0),h([v({type:Boolean,attribute:"flip-icon-in-rtl"})],V.prototype,"flipIconInRtl",void 0),h([v()],V.prototype,"href",void 0),h([v()],V.prototype,"target",void 0),h([v({attribute:"aria-label-selected"})],V.prototype,"ariaLabelSelected",void 0),h([v({type:Boolean})],V.prototype,"toggle",void 0),h([v({type:Boolean,reflect:!0})],V.prototype,"selected",void 0),h([v()],V.prototype,"type",void 0),h([v({reflect:!0})],V.prototype,"value",void 0),h([O()],V.prototype,"flipIcon",void 0);const ko=M`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:none;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host([disabled]){--_disabled-icon-opacity: 1}}/*# sourceMappingURL=shared-styles.css.map */
`,Eo=M`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, 9999px);--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:disabled{color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:disabled .icon{opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}/*# sourceMappingURL=standard-styles.css.map */
`;class Di extends V{}Di.styles=[ko,Eo],customElements.define("ew-icon-button",Di);const So=M`:host{--_leading-space: var(--md-filled-text-field-leading-space, 16px);--_trailing-space: var(--md-filled-text-field-trailing-space, 16px);--_top-space: var(--md-filled-text-field-top-space, 16px);--_bottom-space: var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space: var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space: var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color: var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-color: var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color: var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color: var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_container-shape-start-start: var( --md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, 4px) );--_container-shape-start-end: var( --md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, 4px) );--_container-shape-end-end: var( --md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, 0px) );--_container-shape-end-start: var( --md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, 0px) );--_disabled-active-indicator-color: var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color: var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color: var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color: var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color: var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color: var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color: var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color: var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color: var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-filled-text-field-trailing-icon-size, 24px);--md-filled-field-active-indicator-color: var(--_active-indicator-color);--md-filled-field-active-indicator-height: var(--_active-indicator-height);--md-filled-field-bottom-space: var(--_bottom-space);--md-filled-field-container-color: var(--_container-color);--md-filled-field-container-shape-end-end: var(--_container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_container-shape-start-start);--md-filled-field-content-color: var(--_input-text-color);--md-filled-field-content-font: var(--_input-text-font);--md-filled-field-content-line-height: var(--_input-text-line-height);--md-filled-field-content-size: var(--_input-text-size);--md-filled-field-content-weight: var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_error-active-indicator-color);--md-filled-field-error-content-color: var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_error-label-text-color);--md-filled-field-error-leading-content-color: var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_label-text-color);--md-filled-field-label-text-font: var(--_label-text-font);--md-filled-field-label-text-line-height: var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_label-text-populated-size);--md-filled-field-label-text-size: var(--_label-text-size);--md-filled-field-label-text-weight: var(--_label-text-weight);--md-filled-field-leading-content-color: var(--_leading-icon-color);--md-filled-field-leading-space: var(--_leading-space);--md-filled-field-supporting-text-color: var(--_supporting-text-color);--md-filled-field-supporting-text-font: var(--_supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_supporting-text-size);--md-filled-field-supporting-text-weight: var(--_supporting-text-weight);--md-filled-field-top-space: var(--_top-space);--md-filled-field-trailing-content-color: var(--_trailing-icon-color);--md-filled-field-trailing-space: var(--_trailing-space);--md-filled-field-with-label-bottom-space: var(--_with-label-bottom-space);--md-filled-field-with-label-top-space: var(--_with-label-top-space)}/*# sourceMappingURL=filled-styles.css.map */
`;class P extends B{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const e=this.count??-1,t=this.max??-1;return e<0||t<=0?"":`${e} / ${t}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(e){e.has("disabled")&&e.get("disabled")!==void 0&&(this.disableTransitions=!0),this.disabled&&this.focused&&(e.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:e.get("focused"),wasPopulated:e.get("populated")}),super.update(e)}render(){var e,t,r;const o=this.renderLabel(!0),a=this.renderLabel(!1),s=(e=this.renderOutline)===null||e===void 0?void 0:e.call(this,o),n={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return b`
      <div class="field ${ot(n)}">
        <div class="container-overflow">
          ${(t=this.renderBackground)===null||t===void 0?void 0:t.call(this)} ${(r=this.renderIndicator)===null||r===void 0?void 0:r.call(this)} ${s}
          <div class="container">
            <div class="start">
              <slot name="start"></slot>
            </div>
            <div class="middle">
              <div class="label-wrapper">
                ${a} ${s?A:o}
              </div>
              <div class="content">
                <slot></slot>
              </div>
            </div>
            <div class="end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
        ${this.renderSupportingText()}
      </div>
    `}updated(e){(e.has("supportingText")||e.has("errorText")||e.has("count")||e.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame(()=>{this.refreshErrorAlert=!1}),this.disableTransitions&&requestAnimationFrame(()=>{this.disableTransitions=!1})}renderSupportingText(){const{supportingOrErrorText:e,counterText:t}=this;if(!e&&!t)return A;const r=b`<span>${e}</span>`,o=t?b`<span class="counter">${t}</span>`:A,a=this.error&&this.errorText&&!this.refreshErrorAlert;return b`
      <div class="supporting-text" role=${a?"alert":A}>${r}${o}</div>
      <slot
        name="aria-describedby"
        @slotchange=${this.updateSlottedAriaDescribedBy}></slot>
    `}updateSlottedAriaDescribedBy(){for(const e of this.slottedAriaDescribedBy)_r(b`${this.supportingOrErrorText} ${this.counterText}`,e),e.setAttribute("hidden","")}renderLabel(e){if(!this.label)return A;let t;t=e?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const r={hidden:!t,floating:e,resting:!e},o=`${this.label}${this.required?"*":""}`;return b`
      <span class="label ${ot(r)}" aria-hidden=${!t}
        >${o}</span
      >
    `}animateLabelIfNeeded({wasFocused:e,wasPopulated:t}){var r,o,a;this.label&&(e??(e=this.focused),t??(t=this.populated),(e||t)!==(this.focused||this.populated)&&(this.isAnimating=!0,(r=this.labelAnimation)===null||r===void 0||r.cancel(),this.labelAnimation=(o=this.floatingLabelEl)===null||o===void 0?void 0:o.animate(this.getLabelKeyframes(),{duration:150,easing:Kt.STANDARD}),(a=this.labelAnimation)===null||a===void 0||a.addEventListener("finish",()=>{this.isAnimating=!1})))}getLabelKeyframes(){const{floatingLabelEl:e,restingLabelEl:t}=this;if(!e||!t)return[];const{x:r,y:o,height:a}=e.getBoundingClientRect(),{x:s,y:n,height:d}=t.getBoundingClientRect(),l=e.scrollWidth,c=t.scrollWidth,_=c/l,f=`translateX(${s-r}px) translateY(${n-o+Math.round((d-a*_)/2)}px) scale(${_})`,p="translateX(0) translateY(0) scale(1)",S=t.clientWidth,g=c>S?S/_+"px":"";return this.focused||this.populated?[{transform:f,width:g},{transform:p,width:g}]:[{transform:p,width:g},{transform:f,width:g}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}h([v({type:Boolean})],P.prototype,"disabled",void 0),h([v({type:Boolean})],P.prototype,"error",void 0),h([v({type:Boolean})],P.prototype,"focused",void 0),h([v()],P.prototype,"label",void 0),h([v({type:Boolean})],P.prototype,"populated",void 0),h([v({type:Boolean})],P.prototype,"required",void 0),h([v({type:Boolean})],P.prototype,"resizable",void 0),h([v({attribute:"supporting-text"})],P.prototype,"supportingText",void 0),h([v({attribute:"error-text"})],P.prototype,"errorText",void 0),h([v({type:Number})],P.prototype,"count",void 0),h([v({type:Number})],P.prototype,"max",void 0),h([v({type:Boolean,attribute:"has-start"})],P.prototype,"hasStart",void 0),h([v({type:Boolean,attribute:"has-end"})],P.prototype,"hasEnd",void 0),h([At({slot:"aria-describedby"})],P.prototype,"slottedAriaDescribedBy",void 0),h([O()],P.prototype,"isAnimating",void 0),h([O()],P.prototype,"refreshErrorAlert",void 0),h([O()],P.prototype,"disableTransitions",void 0),h([Y(".label.floating")],P.prototype,"floatingLabelEl",void 0),h([Y(".label.resting")],P.prototype,"restingLabelEl",void 0),h([Y(".container")],P.prototype,"containerEl",void 0);class Ao extends P{renderBackground(){return b`
      <div class="background"></div>
      <div class="state-layer"></div>
    `}renderIndicator(){return b`<div class="active-indicator"></div>`}}const Ro=M`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_container-shape-start-start: var( --md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, 4px) );--_container-shape-start-end: var( --md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, 4px) );--_container-shape-end-end: var( --md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, 0px) );--_container-shape-end-start: var( --md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, 0px) );--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px)}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}/*# sourceMappingURL=filled-styles.css.map */
`,To=M`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start,.with-end .end{min-width:48px}.with-start .start{margin-inline-end:4px}.with-end .end{margin-inline-start:4px}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}/*# sourceMappingURL=shared-styles.css.map */
`;let Ze=class extends Ao{};Ze.styles=[To,Ro],Ze=h([Fe("md-filled-field")],Ze);const Co={},Pi=br(class extends yr{constructor(i){if(super(i),i.type!==Tt.PROPERTY&&i.type!==Tt.ATTRIBUTE&&i.type!==Tt.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!(e=>e.strings===void 0)(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===jt||e===A)return e;const t=i.element,r=i.name;if(i.type===Tt.PROPERTY){if(e===t[r])return jt}else if(i.type===Tt.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(r))return jt}else if(i.type===Tt.ATTRIBUTE&&t.getAttribute(r)===e+"")return jt;return((o,a=Co)=>{o._$AH=a})(i),e}}),Rr="important",Io=" !"+Rr,Oe=br(class extends yr{constructor(i){var e;if(super(i),i.type!==Tt.ATTRIBUTE||i.name!=="style"||((e=i.strings)===null||e===void 0?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const r=i[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const o=e[r];if(o!=null){this.ft.add(r);const a=typeof o=="string"&&o.endsWith(Io);r.includes("-")||a?t.setProperty(r,a?o.slice(0,-11):o,a?Rr:""):t[r]=o}}return jt}}),$o={fromAttribute:i=>i??"",toAttribute:i=>i||null},ze=Symbol("onReportValidity"),ge=Symbol("privateCleanupFormListeners"),_e=Symbol("privateDoNotReportInvalid"),be=Symbol("privateIsSelfReportingValidity"),ye=Symbol("privateCallOnReportValidity");function Tr(i){var e,t,r;class o extends i{constructor(...s){super(...s),this[e]=new AbortController,this[t]=!1,this[r]=!1,this.addEventListener("invalid",n=>{!this[_e]&&n.isTrusted&&this.addEventListener("invalid",()=>{this[ye](n)},{once:!0})},{capture:!0})}checkValidity(){this[_e]=!0;const s=super.checkValidity();return this[_e]=!1,s}reportValidity(){this[be]=!0;const s=super.reportValidity();return s&&this[ye](null),this[be]=!1,s}[(e=ge,t=_e,r=be,ye)](s){const n=s==null?void 0:s.defaultPrevented;n||(this[ze](s),!n&&(s!=null&&s.defaultPrevented)&&(this[be]||function(d,l){if(!d)return!0;let c;for(const _ of d.elements)if(_.matches(":invalid")){c=_;break}return c===l}(this[Q].form,this))&&this.focus())}[ze](s){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(s){super.formAssociatedCallback&&super.formAssociatedCallback(s),this[ge].abort(),s&&(this[ge]=new AbortController,function(n,d,l,c){const _=function(g){if(!Ge.has(g)){const u=new EventTarget;Ge.set(g,u);for(const w of["reportValidity","requestSubmit"]){const x=g[w];g[w]=function(){u.dispatchEvent(new Event("before"));const m=Reflect.apply(x,this,arguments);return u.dispatchEvent(new Event("after")),m}}}return Ge.get(g)}(d);let f,p=!1,S=!1;_.addEventListener("before",()=>{S=!0,f=new AbortController,p=!1,n.addEventListener("invalid",()=>{p=!0},{signal:f.signal})},{signal:c}),_.addEventListener("after",()=>{var g;S=!1,(g=f)===null||g===void 0||g.abort(),p||l()},{signal:c}),d.addEventListener("submit",()=>{S||l()},{signal:c})}(this,s,()=>{this[ye](null)},this[ge].signal))}}return o}const Ge=new WeakMap;class Lo extends ki{computeValidity({state:e,renderedControl:t}){let r=t;Zt(e)&&!r?(r=this.inputControl||document.createElement("input"),this.inputControl=r):r||(r=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=r);const o=Zt(e)?r:null;if(o&&(o.type=e.type),r.value!==e.value&&(r.value=e.value),r.required=e.required,o){const a=e;a.pattern?o.pattern=a.pattern:o.removeAttribute("pattern"),a.min?o.min=a.min:o.removeAttribute("min"),a.max?o.max=a.max:o.removeAttribute("max"),a.step?o.step=a.step:o.removeAttribute("step")}return(e.minLength??-1)>-1?r.setAttribute("minlength",String(e.minLength)):r.removeAttribute("minlength"),(e.maxLength??-1)>-1?r.setAttribute("maxlength",String(e.maxLength)):r.removeAttribute("maxlength"),{validity:r.validity,validationMessage:r.validationMessage}}equals({state:e},{state:t}){const r=e.type===t.type&&e.value===t.value&&e.required===t.required&&e.minLength===t.minLength&&e.maxLength===t.maxLength;return Zt(e)&&Zt(t)?r&&e.pattern===t.pattern&&e.min===t.min&&e.max===t.max&&e.step===t.step:r}copy({state:e}){return{state:Zt(e)?this.copyInput(e):this.copyTextArea(e),renderedControl:null}}copyInput(e){const{type:t,pattern:r,min:o,max:a,step:s}=e;return{...this.copySharedState(e),type:t,pattern:r,min:o,max:a,step:s}}copyTextArea(e){return{...this.copySharedState(e),type:e.type}}copySharedState({value:e,required:t,minLength:r,maxLength:o}){return{value:e,required:t,minLength:r,maxLength:o}}}function Zt(i){return i.type!=="textarea"}const Oo=Tr(xi(wi(Ue(B))));class $ extends Oo{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(e){this.getInputOrTextarea().selectionDirection=e}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(e){this.getInputOrTextarea().selectionEnd=e}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(e){this.getInputOrTextarea().selectionStart=e}get valueAsNumber(){const e=this.getInput();return e?e.valueAsNumber:NaN}set valueAsNumber(e){const t=this.getInput();t&&(t.valueAsNumber=e,this.value=t.value)}get valueAsDate(){const e=this.getInput();return e?e.valueAsDate:null}set valueAsDate(e){const t=this.getInput();t&&(t.valueAsDate=e,this.value=t.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...e){this.getInputOrTextarea().setRangeText(...e),this.value=this.getInputOrTextarea().value}setSelectionRange(e,t,r){this.getInputOrTextarea().setSelectionRange(e,t,r)}stepDown(e){const t=this.getInput();t&&(t.stepDown(e),this.value=t.value)}stepUp(e){const t=this.getInput();t&&(t.stepUp(e),this.value=t.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(e,t,r){e==="value"&&this.dirty||super.attributeChangedCallback(e,t,r)}render(){const e={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:this.type==="textarea","no-spinner":this.noSpinner};return b`
      <span class="text-field ${ot(e)}">
        ${this.renderField()}
      </span>
    `}updated(e){const t=this.getInputOrTextarea().value;this.value!==t&&(this.value=t)}renderField(){return Me`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${this.type==="textarea"}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
    </${this.fieldTag}>`}renderLeadingIcon(){return b`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return b`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderInputOrTextarea(){const e={direction:this.textDirection},t=this.ariaLabel||this.label||A,r=this.autocomplete,o=(this.maxLength??-1)>-1,a=(this.minLength??-1)>-1;if(this.type==="textarea")return b`
        <textarea
          class="input"
          style=${Oe(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||A}
          ?disabled=${this.disabled}
          maxlength=${o?this.maxLength:A}
          minlength=${a?this.minLength:A}
          placeholder=${this.placeholder||A}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          rows=${this.rows}
          cols=${this.cols}
          .value=${Pi(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent}></textarea>
      `;const s=this.renderPrefix(),n=this.renderSuffix(),d=this.inputMode;return b`
      <div class="input-wrapper">
        ${s}
        <input
          class="input"
          style=${Oe(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||A}
          ?disabled=${this.disabled}
          inputmode=${d||A}
          max=${this.max||A}
          maxlength=${o?this.maxLength:A}
          min=${this.min||A}
          minlength=${a?this.minLength:A}
          pattern=${this.pattern||A}
          placeholder=${this.placeholder||A}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          ?multiple=${this.multiple}
          step=${this.step||A}
          type=${this.type}
          .value=${Pi(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent} />
        ${n}
      </div>
    `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(e,t){return e?b`<span class="${ot({suffix:t,prefix:!t})}">${e}</span>`:A}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){var e;this.focused=((e=this.inputOrTextarea)===null||e===void 0?void 0:e.matches(":focus"))??!1}handleInput(e){this.dirty=!0,this.value=e.target.value}redispatchEvent(e){bi(this,e)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return this.type==="textarea"?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[Nt](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}focus(){this.getInputOrTextarea().focus()}[ne](){return new Lo(()=>({state:this,renderedControl:this.inputOrTextarea}))}[le](){return this.inputOrTextarea}[ze](e){e==null||e.preventDefault();const t=this.getErrorText();var r;this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)===null||r===void 0||r.reannounceError())}}Dt($),$.shadowRootOptions={...B.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],$.prototype,"error",void 0),h([v({attribute:"error-text"})],$.prototype,"errorText",void 0),h([v()],$.prototype,"label",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"required",void 0),h([v()],$.prototype,"value",void 0),h([v({attribute:"prefix-text"})],$.prototype,"prefixText",void 0),h([v({attribute:"suffix-text"})],$.prototype,"suffixText",void 0),h([v({type:Boolean,attribute:"has-leading-icon"})],$.prototype,"hasLeadingIcon",void 0),h([v({type:Boolean,attribute:"has-trailing-icon"})],$.prototype,"hasTrailingIcon",void 0),h([v({attribute:"supporting-text"})],$.prototype,"supportingText",void 0),h([v({attribute:"text-direction"})],$.prototype,"textDirection",void 0),h([v({type:Number})],$.prototype,"rows",void 0),h([v({type:Number})],$.prototype,"cols",void 0),h([v({reflect:!0})],$.prototype,"inputMode",void 0),h([v()],$.prototype,"max",void 0),h([v({type:Number})],$.prototype,"maxLength",void 0),h([v()],$.prototype,"min",void 0),h([v({type:Number})],$.prototype,"minLength",void 0),h([v({type:Boolean,attribute:"no-spinner"})],$.prototype,"noSpinner",void 0),h([v()],$.prototype,"pattern",void 0),h([v({reflect:!0,converter:$o})],$.prototype,"placeholder",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"readOnly",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"multiple",void 0),h([v()],$.prototype,"step",void 0),h([v({reflect:!0})],$.prototype,"type",void 0),h([v({reflect:!0})],$.prototype,"autocomplete",void 0),h([O()],$.prototype,"dirty",void 0),h([O()],$.prototype,"focused",void 0),h([O()],$.prototype,"nativeError",void 0),h([O()],$.prototype,"nativeErrorText",void 0),h([Y(".input")],$.prototype,"inputOrTextarea",void 0),h([Y(".field")],$.prototype,"field",void 0),h([At({slot:"leading-icon"})],$.prototype,"leadingIcons",void 0),h([At({slot:"trailing-icon"})],$.prototype,"trailingIcons",void 0);class zo extends ${constructor(){super(...arguments),this.fieldTag=wt`md-filled-field`}}const Do=M`:host{display:inline-flex;outline:none;resize:both;-webkit-tap-highlight-color:rgba(0,0,0,0)}.text-field,.field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}.icon{color:currentColor;display:flex;fill:currentColor}.icon ::slotted(*){display:flex}[hasstart] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[hasend] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-decoration,.input::-webkit-search-cancel-button{display:none}@media(forced-colors: active){.input{background:none}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}/*# sourceMappingURL=shared-styles.css.map */
`;class Bi extends zo{constructor(){super(...arguments),this.fieldTag=wt`md-filled-field`}}Bi.styles=[Do,So],customElements.define("ew-filled-text-field",Bi);class Po extends B{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return b`<span class="shadow"></span>`}}const Bo=M`:host{display:flex;pointer-events:none}:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}/*# sourceMappingURL=elevation-styles.css.map */
`;let Ke=class extends Po{};Ke.styles=[Bo],Ke=h([Fe("md-elevation")],Ke);const Fi=function(i,e){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:i,reason:e,itemPath:[i]}})},ui={SPACE:"Space",ENTER:"Enter"},Fo="click-selection",Uo="keydown",Mo={ESCAPE:"Escape",SPACE:ui.SPACE,ENTER:ui.ENTER};function Cr(i){return Object.values(Mo).some(e=>e===i)}function fi(i,e){const t=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const o=a=>{r=a.composedPath()};return e.addEventListener("md-contains",o),i.dispatchEvent(t),e.removeEventListener("md-contains",o),r.length>0}const Ie="none",No="list-root",mi="first-item",Ir="last-item",Ho="end-start",qo="start-start";class Wo{constructor(e,t){this.host=e,this.getProperties=t,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:e,anchorEl:t,anchorCorner:r,surfaceCorner:o,positioning:a,xOffset:s,yOffset:n,repositionStrategy:d}=this.getProperties(),l=r.toLowerCase().trim(),c=o.toLowerCase().trim();if(!e||!t)return;const _=window.innerWidth,f=window.innerHeight,p=document.createElement("div");p.style.opacity="0",p.style.position="fixed",p.style.display="block",p.style.inset="0",document.body.appendChild(p);const S=p.getBoundingClientRect();p.remove();const g=window.innerHeight-S.bottom,u=window.innerWidth-S.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,e.popover&&e.isConnected&&e.showPopover();const w=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),x=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),[m,k]=c.split("-"),[T,y]=l.split("-"),I=getComputedStyle(e).direction==="ltr";let{blockInset:R,blockOutOfBoundsCorrection:E,surfaceBlockProperty:C}=this.calculateBlock({surfaceRect:w,anchorRect:x,anchorBlock:T,surfaceBlock:m,yOffset:n,positioning:a,windowInnerHeight:f,blockScrollbarHeight:g});if(E){const _t=m==="start"?"end":"start",bt=T==="start"?"end":"start",dt=this.calculateBlock({surfaceRect:w,anchorRect:x,anchorBlock:bt,surfaceBlock:_t,yOffset:n,positioning:a,windowInnerHeight:f,blockScrollbarHeight:g});E>dt.blockOutOfBoundsCorrection&&(R=dt.blockInset,E=dt.blockOutOfBoundsCorrection,C=dt.surfaceBlockProperty)}let{inlineInset:F,inlineOutOfBoundsCorrection:X,surfaceInlineProperty:Rt}=this.calculateInline({surfaceRect:w,anchorRect:x,anchorInline:y,surfaceInline:k,xOffset:s,positioning:a,isLTR:I,windowInnerWidth:_,inlineScrollbarWidth:u});if(X){const _t=k==="start"?"end":"start",bt=y==="start"?"end":"start",dt=this.calculateInline({surfaceRect:w,anchorRect:x,anchorInline:bt,surfaceInline:_t,xOffset:s,positioning:a,isLTR:I,windowInnerWidth:_,inlineScrollbarWidth:u});Math.abs(X)>Math.abs(dt.inlineOutOfBoundsCorrection)&&(F=dt.inlineInset,X=dt.inlineOutOfBoundsCorrection,Rt=dt.surfaceInlineProperty)}d==="move"&&(R-=E,F-=X),this.surfaceStylesInternal={display:"block",opacity:"1",[C]:`${R}px`,[Rt]:`${F}px`},d==="resize"&&(E&&(this.surfaceStylesInternal.height=w.height-E+"px"),X&&(this.surfaceStylesInternal.width=w.width-X+"px")),this.host.requestUpdate()}calculateBlock(e){const{surfaceRect:t,anchorRect:r,anchorBlock:o,surfaceBlock:a,yOffset:s,positioning:n,windowInnerHeight:d,blockScrollbarHeight:l}=e,c=n==="fixed"||n==="document"?1:0,_=n==="document"?1:0,f=a==="start"?1:0,p=a==="end"?1:0,S=(o!==a?1:0)*r.height+s,g=f*r.top+p*(d-r.bottom-l);return{blockInset:c*g+_*(f*window.scrollY-p*window.scrollY)+S,blockOutOfBoundsCorrection:Math.abs(Math.min(0,d-g-S-t.height)),surfaceBlockProperty:a==="start"?"inset-block-start":"inset-block-end"}}calculateInline(e){const{isLTR:t,surfaceInline:r,anchorInline:o,anchorRect:a,surfaceRect:s,xOffset:n,positioning:d,windowInnerWidth:l,inlineScrollbarWidth:c}=e,_=d==="fixed"||d==="document"?1:0,f=d==="document"?1:0,p=t?1:0,S=t?0:1,g=r==="start"?1:0,u=r==="end"?1:0,w=(o!==r?1:0)*a.width+n,x=p*(g*a.left+u*(l-a.right-c))+S*(g*(l-a.right-c)+u*a.left);let m=r==="start"?"inset-inline-start":"inset-inline-end";return d!=="document"&&d!=="fixed"||(m=r==="start"&&t||r==="end"&&!t?"left":"right"),{inlineInset:_*x+w+f*(p*(g*window.scrollX-u*window.scrollX)+S*(u*window.scrollX-g*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,l-x-w-s.width)),surfaceInlineProperty:m}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const e=this.getProperties();let t=!1;for(const[s,n]of Object.entries(e))if(t=t||n!==this.lastValues[s],t)break;const r=this.lastValues.isOpen!==e.isOpen,o=!!e.anchorEl,a=!!e.surfaceEl;t&&o&&a&&(this.lastValues.isOpen=e.isOpen,e.isOpen?(this.lastValues=e,await this.position(),e.onOpen()):r&&(await e.beforeClose(),this.close(),e.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const e=this.getProperties().surfaceEl;e!=null&&e.popover&&e!=null&&e.isConnected&&e.hidePopover()}}const Ui=0,ut=1,Vo=2;class Zo{constructor(e){this.getProperties=e,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=t=>{this.isTypingAhead?this.typeahead(t):this.beginTypeahead(t)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(e){this.active&&(e.code==="Space"||e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape"||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map((t,r)=>[r,t,t.typeaheadText.trim().toLowerCase()]),this.lastActiveRecord=this.typeaheadRecords.find(t=>t[ut].tabIndex===0)??null,this.lastActiveRecord&&(this.lastActiveRecord[ut].tabIndex=-1),this.typeahead(e)))}typeahead(e){if(e.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape")return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[ut].tabIndex=-1));e.code==="Space"&&e.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=e.key.toLowerCase();const t=this.lastActiveRecord?this.lastActiveRecord[Ui]:-1,r=this.typeaheadRecords.length,o=d=>(d[Ui]+r-t)%r,a=this.typeaheadRecords.filter(d=>!d[ut].disabled&&d[Vo].startsWith(this.typaheadBuffer)).sort((d,l)=>o(d)-o(l));if(a.length===0)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[ut].tabIndex=-1),void this.endTypeahead();const s=this.typaheadBuffer.length===1;let n;n=this.lastActiveRecord===a[0]&&s?a[1]??a[0]:a[0],this.lastActiveRecord&&(this.lastActiveRecord[ut].tabIndex=-1),this.lastActiveRecord=n,n[ut].tabIndex=0,n[ut].focus()}}const $r=new Set([q.ArrowDown,q.ArrowUp,q.Home,q.End]),Go=new Set([q.ArrowLeft,q.ArrowRight,...$r]);class U extends B{get openDirection(){return this.menuCorner.split("-")[0]==="start"?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(e){this.currentAnchorElement=e,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.typeaheadDelay=200,this.anchorCorner=Ho,this.menuCorner=qo,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=mi,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=no(),this.listController=new Er({isItem:e=>e.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.selected=!1,e.tabIndex=-1},activateItem:e=>{e.selected=!0,e.tabIndex=0},isNavigableKey:e=>this.isSubmenu?e===(getComputedStyle(this).direction==="rtl"?q.ArrowLeft:q.ArrowRight)||$r.has(e):Go.has(e)}),this.lastFocusedElement=null,this.typeaheadController=new Zo(()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive})),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new Wo(this,()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:this.positioning==="popover"?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&this.positioning!=="popover"?"move":"resize"})),this.onWindowResize=()=>{this.isRepositioning||this.positioning!=="document"&&this.positioning!=="fixed"&&this.positioning!=="popover"||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async e=>{const t=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(t))return;if(e.relatedTarget){if(fi(e.relatedTarget,this)||this.pointerPath.length!==0&&fi(e.relatedTarget,t))return}else if(this.pointerPath.includes(this))return;const r=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=r},this.onOpened=async()=>{this.lastFocusedElement=function(o=document){let a=o.activeElement;for(;a&&(s=a)!==null&&s!==void 0&&(s=s.shadowRoot)!==null&&s!==void 0&&s.activeElement;){var s;a=a.shadowRoot.activeElement}return a}();const e=this.items,t=Jt(e);t&&this.defaultFocus!==Ie&&(t.item.tabIndex=-1);let r=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):r=!!await this.animateOpen(),this.defaultFocus){case mi:const o=yi(e);o&&(o.tabIndex=0,o.focus(),await o.updateComplete);break;case Ir:const a=kr(e);a&&(a.tabIndex=0,a.focus(),await a.updateComplete);break;case No:this.focus()}r||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{var e,t;this.open=!1,this.skipRestoreFocus||(e=this.lastFocusedElement)===null||e===void 0||(t=e.focus)===null||t===void 0||t.call(e),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=e=>{this.pointerPath=e.composedPath()},this.onDocumentClick=e=>{if(!this.open)return;const t=e.composedPath();this.stayOpenOnOutsideClick||t.includes(this)||t.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(e){e.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(e){e.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),e.has("positioning")&&this.positioning==="popover"&&!this.showPopover&&(this.positioning="fixed"),super.update(e)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}render(){return this.renderSurface()}renderSurface(){return b`
      <div
        class="menu ${ot(this.getSurfaceClasses())}"
        style=${Oe(this.menuPositionController.surfaceStyles)}
        popover=${this.positioning==="popover"?"manual":A}>
        ${this.renderElevation()}
        <div class="items">
          <div class="item-padding"> ${this.renderMenuItems()} </div>
        </div>
      </div>
    `}renderMenuItems(){return b`<slot
      @close-menu=${this.onCloseMenu}
      @deactivate-items=${this.onDeactivateItems}
      @request-activation=${this.onRequestActivation}
      @deactivate-typeahead=${this.handleDeactivateTypeahead}
      @activate-typeahead=${this.handleActivateTypeahead}
      @stay-open-on-focusout=${this.handleStayOpenOnFocusout}
      @close-on-focusout=${this.handleCloseOnFocusout}
      @slotchange=${this.listController.onSlotchange}></slot>`}renderElevation(){return b`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:this.positioning==="fixed","has-overflow":this.hasOverflow}}captureKeydown(e){e.target===this&&!e.defaultPrevented&&Cr(e.code)&&(e.preventDefault(),this.close()),this.typeaheadController.onKeydown(e)}async animateOpen(){const e=this.surfaceEl,t=this.slotEl;if(!e||!t)return!0;const r=this.openDirection;this.dispatchEvent(new Event("opening")),e.classList.toggle("animating",!0);const o=this.openCloseAnimationSignal.start(),a=e.offsetHeight,s=r==="UP",n=this.items,d=250/n.length,l=e.animate([{height:"0px"},{height:`${a}px`}],{duration:500,easing:Kt.EMPHASIZED}),c=t.animate([{transform:s?`translateY(-${a}px)`:""},{transform:""}],{duration:500,easing:Kt.EMPHASIZED}),_=e.animate([{opacity:0},{opacity:1}],50),f=[];for(let g=0;g<n.length;g++){const u=n[s?n.length-1-g:g],w=u.animate([{opacity:0},{opacity:1}],{duration:250,delay:d*g});u.classList.toggle("md-menu-hidden",!0),w.addEventListener("finish",()=>{u.classList.toggle("md-menu-hidden",!1)}),f.push([u,w])}let p=g=>{};const S=new Promise(g=>{p=g});return o.addEventListener("abort",()=>{l.cancel(),c.cancel(),_.cancel(),f.forEach(([g,u])=>{g.classList.toggle("md-menu-hidden",!1),u.cancel()}),p(!0)}),l.addEventListener("finish",()=>{e.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),p(!1)}),await S}animateClose(){let e,t;const r=new Promise((u,w)=>{e=u,t=w}),o=this.surfaceEl,a=this.slotEl;if(!o||!a)return t(),r;const s=this.openDirection==="UP";this.dispatchEvent(new Event("closing")),o.classList.toggle("animating",!0);const n=this.openCloseAnimationSignal.start(),d=o.offsetHeight,l=this.items,c=150,_=50/l.length,f=o.animate([{height:`${d}px`},{height:.35*d+"px"}],{duration:c,easing:Kt.EMPHASIZED_ACCELERATE}),p=a.animate([{transform:""},{transform:s?`translateY(-${.65*d}px)`:""}],{duration:c,easing:Kt.EMPHASIZED_ACCELERATE}),S=o.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),g=[];for(let u=0;u<l.length;u++){const w=l[s?u:l.length-1-u],x=w.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+_*u});x.addEventListener("finish",()=>{w.classList.toggle("md-menu-hidden",!0)}),g.push([w,x])}return n.addEventListener("abort",()=>{f.cancel(),p.cancel(),S.cancel(),g.forEach(([u,w])=>{w.cancel(),u.classList.toggle("md-menu-hidden",!1)}),t()}),f.addEventListener("finish",()=>{o.classList.toggle("animating",!1),g.forEach(([u])=>{u.classList.toggle("md-menu-hidden",!1)}),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),e(!0)}),r}handleKeydown(e){this.pointerPath=[],this.listController.handleKeydown(e)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(e){e.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(e){e.stopPropagation(),this.listController.onRequestActivation(e)}handleDeactivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1,this.slotItems.forEach(e=>{var t;(t=e.close)===null||t===void 0||t.call(e)})}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}h([Y(".menu")],U.prototype,"surfaceEl",void 0),h([Y("slot")],U.prototype,"slotEl",void 0),h([v()],U.prototype,"anchor",void 0),h([v()],U.prototype,"positioning",void 0),h([v({type:Boolean})],U.prototype,"quick",void 0),h([v({type:Boolean,attribute:"has-overflow"})],U.prototype,"hasOverflow",void 0),h([v({type:Boolean,reflect:!0})],U.prototype,"open",void 0),h([v({type:Number,attribute:"x-offset"})],U.prototype,"xOffset",void 0),h([v({type:Number,attribute:"y-offset"})],U.prototype,"yOffset",void 0),h([v({type:Number,attribute:"typeahead-delay"})],U.prototype,"typeaheadDelay",void 0),h([v({attribute:"anchor-corner"})],U.prototype,"anchorCorner",void 0),h([v({attribute:"menu-corner"})],U.prototype,"menuCorner",void 0),h([v({type:Boolean,attribute:"stay-open-on-outside-click"})],U.prototype,"stayOpenOnOutsideClick",void 0),h([v({type:Boolean,attribute:"stay-open-on-focusout"})],U.prototype,"stayOpenOnFocusout",void 0),h([v({type:Boolean,attribute:"skip-restore-focus"})],U.prototype,"skipRestoreFocus",void 0),h([v({attribute:"default-focus"})],U.prototype,"defaultFocus",void 0),h([At({flatten:!0})],U.prototype,"slotItems",void 0),h([O()],U.prototype,"typeaheadActive",void 0);const Ko=M`:host{--md-elevation-level: var(--md-menu-container-elevation, 2);--md-elevation-shadow-color: var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape: var(--md-menu-container-shape, 4px)}.menu{border-radius:var(--md-menu-container-shape, 4px);display:none;inset:auto;border:none;padding:0px;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:none;box-sizing:border-box;background-color:var(--md-menu-container-color, var(--md-sys-color-surface-container, #f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit}.item-padding{padding-block:8px}.has-overflow:not([popover]) .items{overflow:visible}.has-overflow.animating .items,.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors: active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}/*# sourceMappingURL=menu-styles.css.map */
`;let je=class extends U{};je.styles=[Ko],je=h([Fe("md-menu")],je);class jo extends ki{computeValidity(e){return this.selectControl||(this.selectControl=document.createElement("select")),_r(b`<option value=${e.value}></option>`,this.selectControl),this.selectControl.value=e.value,this.selectControl.required=e.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(e,t){return e.value===t.value&&e.required===t.required}copy({value:e,required:t}){return{value:e,required:t}}}var Mi;const xe=Symbol("value"),Yo=Tr(xi(wi(Ue(B))));class z extends Yo{get value(){return this[xe]}set value(e){this.lastUserSetValue=e,this.select(e)}get options(){var e;return((e=this.menu)===null||e===void 0?void 0:e.items)??[]}get selectedIndex(){const[e,t]=(this.getSelectedOptions()??[])[0]??[];return t??-1}set selectedIndex(e){this.lastUserSetSelectedIndex=e,this.selectIndex(e)}get selectedOptions(){return(this.getSelectedOptions()??[]).map(([e])=>e)}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=200,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[Mi]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=Ie,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(e){const t=this.options.find(r=>r.value===e);t&&this.selectItem(t)}selectIndex(e){const t=this.options[e];t&&this.selectItem(t)}reset(){for(const e of this.options)e.selected=e.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}[(Mi=xe,ze)](e){e==null||e.preventDefault();const t=this.getErrorText();var r;this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)===null||r===void 0||r.reannounceError())}update(e){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const t=this.getBoundingClientRect();this.selectWidth=t.width}this.prevOpen=this.open,super.update(e)}render(){return b`
      <span
        class="select ${ot(this.getRenderClasses())}"
        @focusout=${this.handleFocusout}>
        ${this.renderField()} ${this.renderMenu()}
      </span>
    `}async firstUpdated(e){var t;await((t=this.menu)===null||t===void 0?void 0:t.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),this.lastSelectedOptionRecords.length||this.options.length||setTimeout(()=>{this.updateValueAndDisplayText()}),super.firstUpdated(e)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){return Me`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${this.ariaLabel||A}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return b`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return b`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}>
          <svg height="5" viewBox="7 10 10 5" focusable="false">
            <polygon
              class="down"
              stroke="none"
              fill-rule="evenodd"
              points="7 10 12 15 17 10"></polygon>
            <polygon
              class="up"
              stroke="none"
              fill-rule="evenodd"
              points="7 15 12 10 17 15"></polygon>
          </svg>
        </slot>
      </span>
    `}renderLabel(){return b`<div id="label">${this.displayText||b`&nbsp;`}</div>`}renderMenu(){const e=this.label||this.ariaLabel;return b`<div class="menu-wrapper">
      <md-menu
        id="listbox"
        .defaultFocus=${this.defaultFocus}
        role="listbox"
        tabindex="-1"
        aria-label=${e||A}
        stay-open-on-focusout
        part="menu"
        exportparts="focus-ring: menu-focus-ring"
        anchor="field"
        style=${Oe({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}
        .open=${this.open}
        .quick=${this.quick}
        .positioning=${this.menuPositioning}
        .typeaheadDelay=${this.typeaheadDelay}
        .anchorCorner=${this.menuAlign==="start"?"end-start":"end-end"}
        .menuCorner=${this.menuAlign==="start"?"start-start":"start-end"}
        @opening=${this.handleOpening}
        @opened=${this.redispatchEvent}
        @closing=${this.redispatchEvent}
        @closed=${this.handleClosed}
        @close-menu=${this.handleCloseMenu}
        @request-selection=${this.handleRequestSelection}
        @request-deselection=${this.handleRequestDeselection}>
        ${this.renderMenuContent()}
      </md-menu>
    </div>`}renderMenuContent(){return b`<slot></slot>`}handleKeydown(e){if(this.open||this.disabled||!this.menu)return;const t=this.menu.typeaheadController,r=e.code==="Space"||e.code==="ArrowDown"||e.code==="ArrowUp"||e.code==="End"||e.code==="Home"||e.code==="Enter";if(!t.isTypingAhead&&r){switch(e.preventDefault(),this.open=!0,e.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=Ie;break;case"End":this.defaultFocus=Ir;break;case"ArrowUp":case"Home":this.defaultFocus=mi}return}if(e.key.length===1){var o,a;t.onKeydown(e),e.preventDefault();const{lastActiveRecord:s}=t;if(!s)return;(o=this.labelEl)===null||o===void 0||(a=o.setAttribute)===null||a===void 0||a.call(o,"aria-live","polite"),this.selectItem(s[ut])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(e){e.relatedTarget&&fi(e.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const e=this.menu.items;return this.lastSelectedOptionRecords=function(t){const r=[];for(let o=0;o<t.length;o++){const a=t[o];a.selected&&r.push([a,o])}return r}(e),this.lastSelectedOptionRecords}async getUpdateComplete(){var e;return await((e=this.menu)===null||e===void 0?void 0:e.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const e=this.getSelectedOptions()??[];let t=!1;if(e.length){const[r]=e[0];t=this.lastSelectedOption!==r,this.lastSelectedOption=r,this[xe]=r.value,this.displayText=r.displayText}else t=this.lastSelectedOption!==null,this.lastSelectedOption=null,this[xe]="",this.displayText="";return t}async handleOpening(e){var t,r,o;if((t=this.labelEl)===null||t===void 0||(r=t.removeAttribute)===null||r===void 0||r.call(t,"aria-live"),this.redispatchEvent(e),this.defaultFocus!==Ie)return;const a=this.menu.items,s=(o=Jt(a))===null||o===void 0?void 0:o.item;let[n]=this.lastSelectedOptionRecords[0]??[null];s&&s!==n&&(s.tabIndex=-1),n=n??a[0],n&&(n.tabIndex=0,n.focus())}redispatchEvent(e){bi(this,e)}handleClosed(e){this.open=!1,this.redispatchEvent(e)}handleCloseMenu(e){const t=e.detail.reason,r=e.detail.itemPath[0];this.open=!1;let o=!1;var a;t.kind==="click-selection"||t.kind==="keydown"&&(a=t.key,Object.values(ui).some(s=>s===a))?o=this.selectItem(r):(r.tabIndex=-1,r.blur()),o&&this.dispatchInteractionEvents()}selectItem(e){return(this.getSelectedOptions()??[]).forEach(([t])=>{e!==t&&(t.selected=!1)}),e.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)||this.selectItem(t)}handleRequestDeselection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):this.lastUserSetSelectedIndex===null||this.lastSelectedOptionRecords.length?this.updateValueAndDisplayText():this.selectIndex(this.lastUserSetSelectedIndex)}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[Nt](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}[ne](){return new jo(()=>this)}[le](){return this.field}}Dt(z),z.shadowRootOptions={...B.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean})],z.prototype,"quick",void 0),h([v({type:Boolean})],z.prototype,"required",void 0),h([v({type:String,attribute:"error-text"})],z.prototype,"errorText",void 0),h([v()],z.prototype,"label",void 0),h([v({type:String,attribute:"supporting-text"})],z.prototype,"supportingText",void 0),h([v({type:Boolean,reflect:!0})],z.prototype,"error",void 0),h([v({attribute:"menu-positioning"})],z.prototype,"menuPositioning",void 0),h([v({type:Boolean,attribute:"clamp-menu-width"})],z.prototype,"clampMenuWidth",void 0),h([v({type:Number,attribute:"typeahead-delay"})],z.prototype,"typeaheadDelay",void 0),h([v({type:Boolean,attribute:"has-leading-icon"})],z.prototype,"hasLeadingIcon",void 0),h([v({attribute:"display-text"})],z.prototype,"displayText",void 0),h([v({attribute:"menu-align"})],z.prototype,"menuAlign",void 0),h([v()],z.prototype,"value",null),h([v({type:Number,attribute:"selected-index"})],z.prototype,"selectedIndex",null),h([O()],z.prototype,"nativeError",void 0),h([O()],z.prototype,"nativeErrorText",void 0),h([O()],z.prototype,"focused",void 0),h([O()],z.prototype,"open",void 0),h([O()],z.prototype,"defaultFocus",void 0),h([Y(".field")],z.prototype,"field",void 0),h([Y("md-menu")],z.prototype,"menu",void 0),h([Y("#label")],z.prototype,"labelEl",void 0),h([At({slot:"leading-icon",flatten:!0})],z.prototype,"leadingIcons",void 0);class Xo extends z{constructor(){super(...arguments),this.fieldTag=wt`md-filled-field`}}const Jo=M`:host{--_text-field-active-indicator-color: var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height: var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color: var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-container-shape-start-start: var( --md-filled-select-text-field-container-shape-start-start, var( --md-filled-select-text-field-container-shape, 4px ) );--_text-field-container-shape-start-end: var( --md-filled-select-text-field-container-shape-start-end, var( --md-filled-select-text-field-container-shape, 4px ) );--_text-field-container-shape-end-end: var( --md-filled-select-text-field-container-shape-end-end, var( --md-filled-select-text-field-container-shape, 0px ) );--_text-field-container-shape-end-start: var( --md-filled-select-text-field-container-shape-end-start, var( --md-filled-select-text-field-container-shape, 0px ) );--_text-field-disabled-active-indicator-color: var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height: var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity: var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color: var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity: var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color: var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color: var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color: var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color: var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color: var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color: var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color: var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color: var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color: var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity: var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color: var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color: var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color: var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height: var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color: var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color: var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color: var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height: var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color: var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color: var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity: var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color: var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color: var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-filled-select-text-field-trailing-icon-size, 24px);--md-filled-field-active-indicator-color: var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height: var(--_text-field-active-indicator-height);--md-filled-field-container-color: var(--_text-field-container-color);--md-filled-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-filled-field-content-color: var(--_text-field-input-text-color);--md-filled-field-content-font: var(--_text-field-input-text-font);--md-filled-field-content-line-height: var(--_text-field-input-text-line-height);--md-filled-field-content-size: var(--_text-field-input-text-size);--md-filled-field-content-weight: var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color: var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_text-field-label-text-color);--md-filled-field-label-text-font: var(--_text-field-label-text-font);--md-filled-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size: var(--_text-field-label-text-size);--md-filled-field-label-text-weight: var(--_text-field-label-text-weight);--md-filled-field-leading-content-color: var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}/*# sourceMappingURL=filled-select-styles.css.map */
`,Qo=M`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:none}.select{position:relative;flex-direction:column}.icon.trailing svg,.icon ::slotted(*){fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select:not(.open) .down,.select.open .up{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width, inherit)}.menu-wrapper{width:0px;height:0px;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}/*# sourceMappingURL=shared-styles.css.map */
`;class Ni extends Xo{}Ni.styles=[Qo,Jo],customElements.define("ew-filled-select",Ni);const ta=M`:host{display:flex;--md-ripple-hover-color: var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity, 0.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-menu-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-menu-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-menu-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-menu-item-one-line-container-height, 56px);padding-top:var(--md-menu-item-top-space, 12px);padding-bottom:var(--md-menu-item-bottom-space, 12px);padding-inline-start:var(--md-menu-item-leading-space, 16px);padding-inline-end:var(--md-menu-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-menu-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-menu-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}.list-item{background-color:var(--md-menu-item-container-color, transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color, var(--md-sys-color-secondary-container, #e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b))}@media(forced-colors: active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}/*# sourceMappingURL=menu-item-styles.css.map */
`;class ea{constructor(e,t){this.host=e,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(Fi(this.host,{kind:Fo}))},this.onKeydown=r=>{if(this.host.href&&r.code==="Enter"){const a=this.getInteractiveElement();a instanceof HTMLAnchorElement&&a.click()}if(r.defaultPrevented)return;const o=r.code;this.host.keepOpen&&o!=="Escape"||Cr(o)&&(r.preventDefault(),this.host.dispatchEvent(Fi(this.host,{kind:Uo,key:o})))},this.getHeadlineElements=t.getHeadlineElements,this.getSupportingTextElements=t.getSupportingTextElements,this.getDefaultElements=t.getDefaultElements,this.getInteractiveElement=t.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(this.internalTypeaheadText!==null)return this.internalTypeaheadText;const e=this.getHeadlineElements(),t=[];return e.forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getDefaultElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getSupportingTextElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return this.host.type==="option"?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(e){this.internalTypeaheadText=e}}class ia{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(e){this.menuItemController.setTypeaheadText(e)}get displayText(){return this.internalDisplayText!==null?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(e){this.internalDisplayText=e}constructor(e,t){this.host=e,this.internalDisplayText=null,this.lastSelected=this.host.selected,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=r=>{this.menuItemController.onKeydown(r)},this.menuItemController=new ea(e,t),e.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected===this.host.selected||this.firstUpdate||(this.host.selected?this.host.dispatchEvent(new Event("request-selection",{bubbles:!0,composed:!0})):this.host.dispatchEvent(new Event("request-deselection",{bubbles:!0,composed:!0}))),this.lastSelected=this.host.selected,this.firstUpdate=!1}}class G extends B{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new ia(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(e){this.selectOptionController.setTypeaheadText(e)}get displayText(){return this.selectOptionController.displayText}set displayText(e){this.selectOptionController.setDisplayText(e)}render(){return this.renderListItem(b`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){return b`
      <li
        id="item"
        tabindex=${this.disabled?-1:0}
        role=${this.selectOptionController.role}
        aria-label=${this.ariaLabel||A}
        aria-selected=${this.ariaSelected||A}
        aria-checked=${this.ariaChecked||A}
        aria-expanded=${this.ariaExpanded||A}
        aria-haspopup=${this.ariaHasPopup||A}
        class="list-item ${ot(this.getRenderClasses())}"
        @click=${this.selectOptionController.onClick}
        @keydown=${this.selectOptionController.onKeydown}
        >${e}</li
      >
    `}renderRipple(){return b` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled}></md-ripple>`}renderFocusRing(){return b` <md-focus-ring
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return b`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}focus(){var e;(e=this.listItemRoot)===null||e===void 0||e.focus()}}Dt(G),G.shadowRootOptions={...B.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],G.prototype,"disabled",void 0),h([v({type:Boolean,attribute:"md-menu-item",reflect:!0})],G.prototype,"isMenuItem",void 0),h([v({type:Boolean})],G.prototype,"selected",void 0),h([v()],G.prototype,"value",void 0),h([Y(".list-item")],G.prototype,"listItemRoot",void 0),h([At({slot:"headline"})],G.prototype,"headlineElements",void 0),h([At({slot:"supporting-text"})],G.prototype,"supportingTextElements",void 0),h([function(i){return(e,t)=>{const{slot:r}=i??{},o="slot"+(r?`[name=${r}]`:":not([name])");return gr(e,t,{get(){var a;const s=(a=this.renderRoot)===null||a===void 0?void 0:a.querySelector(o);return(s==null?void 0:s.assignedNodes(i))??[]}})}}({slot:""})],G.prototype,"defaultElements",void 0),h([v({attribute:"typeahead-text"})],G.prototype,"typeaheadText",null),h([v({attribute:"display-text"})],G.prototype,"displayText",null);class Hi extends G{}Hi.styles=[ta],customElements.define("ew-select-option",Hi);class Ut extends B{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return b`
      <div
        class="progress ${ot(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||A}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?A:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}Dt(Ut),h([v({type:Number})],Ut.prototype,"value",void 0),h([v({type:Number})],Ut.prototype,"max",void 0),h([v({type:Boolean})],Ut.prototype,"indeterminate",void 0),h([v({type:Boolean,attribute:"four-color"})],Ut.prototype,"fourColor",void 0);class ra extends Ut{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=100*(1-this.value/this.max);return b`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return b` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}const oa=M`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}/*# sourceMappingURL=circular-progress-styles.css.map */
`;class qi extends ra{}qi.styles=[oa],customElements.define("ew-circular-progress",qi);class we extends B{render(){return b`
      <div>
        <ew-circular-progress
          active
          ?indeterminate=${this.progress===void 0}
          .value=${this.progress!==void 0?this.progress/100:void 0}
        ></ew-circular-progress>
        ${this.progress!==void 0?b`<div>${this.progress}%</div>`:""}
      </div>
      ${this.label}
    `}}we.styles=M`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    ew-circular-progress {
      margin-bottom: 16px;
    }
  `,h([v()],we.prototype,"label",void 0),h([v()],we.prototype,"progress",void 0),customElements.define("ewt-page-progress",we);class ke extends B{render(){return b`
      <div class="icon">${this.icon}</div>
      ${this.label}
    `}}ke.styles=M`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    .icon {
      font-size: 50px;
      line-height: 80px;
      color: black;
    }
  `,h([v()],ke.prototype,"icon",void 0),h([v()],ke.prototype,"label",void 0),customElements.define("ewt-page-message",ke);const aa=Pt`
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
    />
  </svg>
`,sa=Pt`
  <svg viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
    />
  </svg>
`,Wi=Pt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
  </svg>
`,na=Pt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />
  </svg>
`,Vi=Pt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M20,19V7H4V19H20M20,3A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5C2,3.89 2.9,3 4,3H20M13,17V15H18V17H13M9.58,13L5.57,9H8.4L11.7,12.3C12.09,12.69 12.09,13.33 11.7,13.72L8.42,17H5.59L9.58,13Z" />
  </svg>
`,Zi=Pt`
  <svg slot="start" viewBox="0 0 24 24">
  <path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
  </svg>
`,Gi=Pt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864" />
  </svg>
`,la=[73,77,80,82,79,86,1];var Mt,yt;(function(i){i[i.CURRENT_STATE=1]="CURRENT_STATE",i[i.ERROR_STATE=2]="ERROR_STATE",i[i.RPC=3]="RPC",i[i.RPC_RESULT=4]="RPC_RESULT"})(Mt||(Mt={})),function(i){i[i.READY=2]="READY",i[i.PROVISIONING=3]="PROVISIONING",i[i.PROVISIONED=4]="PROVISIONED"}(yt||(yt={}));const da={0:"NO_ERROR",1:"INVALID_RPC_PACKET",2:"UNKNOWN_RPC_COMMAND",3:"UNABLE_TO_CONNECT",254:"TIMEOUT",255:"UNKNOWN_ERROR"};class Lr extends Error{constructor(){super("Port is not ready")}}const Ki=i=>"["+i.map(e=>((t,r=2)=>{let o=t.toString(16).toUpperCase();return o.startsWith("-")?"-0x"+o.substring(1).padStart(r,"0"):"0x"+o.padStart(r,"0")})(e)).join(", ")+"]";class ca extends EventTarget{constructor(e,t){if(super(),this.port=e,this.logger=t,this.error=0,e.readable===null)throw new Error("Port is not readable");if(e.writable===null)throw new Error("Port is not writable")}async initialize(e=1e3){var t;if(this.logger.log("Initializing Improv Serial"),this._processInput(),await(t=1e3,new Promise(r=>setTimeout(r,t))),this._reader===void 0)throw new Lr;try{await new Promise(async(r,o)=>{setTimeout(()=>o(new Error("Improv Wi-Fi Serial not detected")),e),await this.requestCurrentState(),r(void 0)}),await this.requestInfo()}catch(r){throw await this.close(),r}return this.info}async close(){this._reader&&await new Promise(e=>{this._reader.cancel(),this.addEventListener("disconnect",e,{once:!0})})}async requestCurrentState(){let e;try{await new Promise(async(r,o)=>{this.addEventListener("state-changed",r,{once:!0}),e=this._sendRPCWithResponse(2,[]),e.catch(a=>{this.removeEventListener("state-changed",r),o(a)})})}catch(r){throw this._rpcFeedback=void 0,new Error(`Error fetching current state: ${r}`)}if(this.state!==yt.PROVISIONED)return void(this._rpcFeedback=void 0);const t=await e;this.nextUrl=t[0]}async requestInfo(e){const t=await this._sendRPCWithResponse(3,[],e);this.info={firmware:t[0],version:t[1],name:t[3],chipFamily:t[2]}}async provision(e,t,r){const o=new TextEncoder,a=o.encode(e),s=o.encode(t),n=[a.length,...a,s.length,...s],d=await this._sendRPCWithResponse(1,n,r);this.nextUrl=d[0]}async scan(){const e=(await this._sendRPCWithMultipleResponses(4,[])).map(([t,r,o])=>({name:t,rssi:parseInt(r),secured:o==="YES"}));return e.sort((t,r)=>t.name.toLocaleLowerCase().localeCompare(r.name.toLocaleLowerCase())),e}_sendRPC(e,t){this.writePacketToStream(Mt.RPC,[e,t.length,...t])}async _sendRPCWithResponse(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:e,resolve:o,reject:a},this._sendRPC(e,t)}),r)}async _sendRPCWithMultipleResponses(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:e,resolve:o,reject:a,receivedData:[]},this._sendRPC(e,t)}),r)}async _awaitRPCResultWithTimeout(e,t){return t?await new Promise((r,o)=>{const a=setTimeout(()=>this._setError(254),t);e.finally(()=>clearTimeout(a)),e.then(r,o)}):await e}async _processInput(){this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{let e,t=[],r=0;for(;;){const{value:o,done:a}=await this._reader.read();if(a)break;if(o&&o.length!==0)for(const s of o){if(e===!1){s===10&&(e=void 0);continue}if(e===!0){t.push(s),t.length===r&&(this._handleIncomingPacket(t),e=void 0,t=[]);continue}if(s===10){t=[];continue}if(t.push(s),t.length===9){if(e=String.fromCharCode(...t.slice(0,6))==="IMPROV",!e){t=[];continue}r=9+t[8]+1}}}}catch(e){this.logger.error("Error while reading serial port",e)}finally{this._reader.releaseLock(),this._reader=void 0}this.logger.debug("Finished read loop"),this.dispatchEvent(new Event("disconnect"))}_handleIncomingPacket(e){const t=e.slice(6),r=t[0],o=t[1],a=t[2],s=t.slice(3,3+a);if(this.logger.debug("PROCESS",{version:r,packetType:o,packetLength:a,data:Ki(s)}),r!==1)return void this.logger.error("Received unsupported version",r);let n=t[3+a],d=0;for(let l=0;l<e.length-1;l++)d+=e[l];if(d&=255,d===n)if(o===Mt.CURRENT_STATE)this.state=s[0],this.dispatchEvent(new CustomEvent("state-changed",{detail:this.state}));else if(o===Mt.ERROR_STATE)this._setError(s[0]);else if(o===Mt.RPC_RESULT){if(!this._rpcFeedback)return void this.logger.error("Received result while not waiting for one");const l=s[0];if(l!==this._rpcFeedback.command)return void this.logger.error(`Received result for command ${l} but expected ${this._rpcFeedback.command}`);const c=[],_=s[1];let f=2;for(;f<2+_;)c.push(String.fromCodePoint(...s.slice(f+1,f+s[f]+1))),f+=s[f]+1;"receivedData"in this._rpcFeedback?c.length>0?this._rpcFeedback.receivedData.push(c):(this._rpcFeedback.resolve(this._rpcFeedback.receivedData),this._rpcFeedback=void 0):(this._rpcFeedback.resolve(c),this._rpcFeedback=void 0)}else this.logger.error("Unable to handle packet",t);else this.logger.error(`Received invalid checksum ${n}. Expected ${d}`)}async writePacketToStream(e,t){const r=new Uint8Array([...la,e,t.length,...t,0,0]);r[r.length-2]=255&r.reduce((a,s)=>a+s,0),r[r.length-1]=10,this.logger.debug("Writing to stream:",Ki(new Array(...r)));const o=this.port.writable.getWriter();await o.write(r);try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}_setError(e){this.error=e,e>0&&this._rpcFeedback&&(this._rpcFeedback.reject(da[e]||`UNKNOWN_ERROR (${e})`),this._rpcFeedback=void 0),this.dispatchEvent(new CustomEvent("error-changed",{detail:this.error}))}}class W extends Error{}function Wt(i){let e=i.length;for(;--e>=0;)i[e]=0}const Ei=256,Or=286,Qt=30,te=15,vi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$e=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ha=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ji=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ft=new Array(576);Wt(ft);const ee=new Array(60);Wt(ee);const de=new Array(512);Wt(de);const ce=new Array(256);Wt(ce);const Si=new Array(29);Wt(Si);const De=new Array(Qt);function Ye(i,e,t,r,o){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=o,this.has_stree=i&&i.length}let Yi,Xi,Ji;function Xe(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}Wt(De);const zr=i=>i<256?de[i]:de[256+(i>>>7)],he=(i,e)=>{i.pending_buf[i.pending++]=255&e,i.pending_buf[i.pending++]=e>>>8&255},Z=(i,e,t)=>{i.bi_valid>16-t?(i.bi_buf|=e<<i.bi_valid&65535,he(i,i.bi_buf),i.bi_buf=e>>16-i.bi_valid,i.bi_valid+=t-16):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},st=(i,e,t)=>{Z(i,t[2*e],t[2*e+1])},Dr=(i,e)=>{let t=0;do t|=1&i,i>>>=1,t<<=1;while(--e>0);return t>>>1},Pr=(i,e,t)=>{const r=new Array(16);let o,a,s=0;for(o=1;o<=te;o++)s=s+t[o-1]<<1,r[o]=s;for(a=0;a<=e;a++){let n=i[2*a+1];n!==0&&(i[2*a]=Dr(r[n]++,n))}},Br=i=>{let e;for(e=0;e<Or;e++)i.dyn_ltree[2*e]=0;for(e=0;e<Qt;e++)i.dyn_dtree[2*e]=0;for(e=0;e<19;e++)i.bl_tree[2*e]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},Fr=i=>{i.bi_valid>8?he(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},Qi=(i,e,t,r)=>{const o=2*e,a=2*t;return i[o]<i[a]||i[o]===i[a]&&r[e]<=r[t]},Je=(i,e,t)=>{const r=i.heap[t];let o=t<<1;for(;o<=i.heap_len&&(o<i.heap_len&&Qi(e,i.heap[o+1],i.heap[o],i.depth)&&o++,!Qi(e,r,i.heap[o],i.depth));)i.heap[t]=i.heap[o],t=o,o<<=1;i.heap[t]=r},tr=(i,e,t)=>{let r,o,a,s,n=0;if(i.sym_next!==0)do r=255&i.pending_buf[i.sym_buf+n++],r+=(255&i.pending_buf[i.sym_buf+n++])<<8,o=i.pending_buf[i.sym_buf+n++],r===0?st(i,o,e):(a=ce[o],st(i,a+Ei+1,e),s=vi[a],s!==0&&(o-=Si[a],Z(i,o,s)),r--,a=zr(r),st(i,a,t),s=$e[a],s!==0&&(r-=De[a],Z(i,r,s)));while(n<i.sym_next);st(i,256,e)},Qe=(i,e)=>{const t=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,n,d,l=-1;for(i.heap_len=0,i.heap_max=573,s=0;s<a;s++)t[2*s]!==0?(i.heap[++i.heap_len]=l=s,i.depth[s]=0):t[2*s+1]=0;for(;i.heap_len<2;)d=i.heap[++i.heap_len]=l<2?++l:0,t[2*d]=1,i.depth[d]=0,i.opt_len--,o&&(i.static_len-=r[2*d+1]);for(e.max_code=l,s=i.heap_len>>1;s>=1;s--)Je(i,t,s);d=a;do s=i.heap[1],i.heap[1]=i.heap[i.heap_len--],Je(i,t,1),n=i.heap[1],i.heap[--i.heap_max]=s,i.heap[--i.heap_max]=n,t[2*d]=t[2*s]+t[2*n],i.depth[d]=(i.depth[s]>=i.depth[n]?i.depth[s]:i.depth[n])+1,t[2*s+1]=t[2*n+1]=d,i.heap[1]=d++,Je(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],((c,_)=>{const f=_.dyn_tree,p=_.max_code,S=_.stat_desc.static_tree,g=_.stat_desc.has_stree,u=_.stat_desc.extra_bits,w=_.stat_desc.extra_base,x=_.stat_desc.max_length;let m,k,T,y,I,R,E=0;for(y=0;y<=te;y++)c.bl_count[y]=0;for(f[2*c.heap[c.heap_max]+1]=0,m=c.heap_max+1;m<573;m++)k=c.heap[m],y=f[2*f[2*k+1]+1]+1,y>x&&(y=x,E++),f[2*k+1]=y,k>p||(c.bl_count[y]++,I=0,k>=w&&(I=u[k-w]),R=f[2*k],c.opt_len+=R*(y+I),g&&(c.static_len+=R*(S[2*k+1]+I)));if(E!==0){do{for(y=x-1;c.bl_count[y]===0;)y--;c.bl_count[y]--,c.bl_count[y+1]+=2,c.bl_count[x]--,E-=2}while(E>0);for(y=x;y!==0;y--)for(k=c.bl_count[y];k!==0;)T=c.heap[--m],T>p||(f[2*T+1]!==y&&(c.opt_len+=(y-f[2*T+1])*f[2*T],f[2*T+1]=y),k--)}})(i,e),Pr(t,l,i.bl_count)},er=(i,e,t)=>{let r,o,a=-1,s=e[1],n=0,d=7,l=4;for(s===0&&(d=138,l=3),e[2*(t+1)+1]=65535,r=0;r<=t;r++)o=s,s=e[2*(r+1)+1],++n<d&&o===s||(n<l?i.bl_tree[2*o]+=n:o!==0?(o!==a&&i.bl_tree[2*o]++,i.bl_tree[32]++):n<=10?i.bl_tree[34]++:i.bl_tree[36]++,n=0,a=o,s===0?(d=138,l=3):o===s?(d=6,l=3):(d=7,l=4))},ir=(i,e,t)=>{let r,o,a=-1,s=e[1],n=0,d=7,l=4;for(s===0&&(d=138,l=3),r=0;r<=t;r++)if(o=s,s=e[2*(r+1)+1],!(++n<d&&o===s)){if(n<l)do st(i,o,i.bl_tree);while(--n!=0);else o!==0?(o!==a&&(st(i,o,i.bl_tree),n--),st(i,16,i.bl_tree),Z(i,n-3,2)):n<=10?(st(i,17,i.bl_tree),Z(i,n-3,3)):(st(i,18,i.bl_tree),Z(i,n-11,7));n=0,a=o,s===0?(d=138,l=3):o===s?(d=6,l=3):(d=7,l=4)}};let rr=!1;const Ur=(i,e,t,r)=>{Z(i,0+(r?1:0),3),Fr(i),he(i,t),he(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t};var pa=i=>{rr||((()=>{let e,t,r,o,a;const s=new Array(16);for(r=0,o=0;o<28;o++)for(Si[o]=r,e=0;e<1<<vi[o];e++)ce[r++]=o;for(ce[r-1]=o,a=0,o=0;o<16;o++)for(De[o]=a,e=0;e<1<<$e[o];e++)de[a++]=o;for(a>>=7;o<Qt;o++)for(De[o]=a<<7,e=0;e<1<<$e[o]-7;e++)de[256+a++]=o;for(t=0;t<=te;t++)s[t]=0;for(e=0;e<=143;)ft[2*e+1]=8,e++,s[8]++;for(;e<=255;)ft[2*e+1]=9,e++,s[9]++;for(;e<=279;)ft[2*e+1]=7,e++,s[7]++;for(;e<=287;)ft[2*e+1]=8,e++,s[8]++;for(Pr(ft,287,s),e=0;e<Qt;e++)ee[2*e+1]=5,ee[2*e]=Dr(e,5);Yi=new Ye(ft,vi,257,Or,te),Xi=new Ye(ee,$e,0,Qt,te),Ji=new Ye(new Array(0),ha,0,19,7)})(),rr=!0),i.l_desc=new Xe(i.dyn_ltree,Yi),i.d_desc=new Xe(i.dyn_dtree,Xi),i.bl_desc=new Xe(i.bl_tree,Ji),i.bi_buf=0,i.bi_valid=0,Br(i)},ua=(i,e,t,r)=>{let o,a,s=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=(n=>{let d,l=4093624447;for(d=0;d<=31;d++,l>>>=1)if(1&l&&n.dyn_ltree[2*d]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(d=32;d<Ei;d++)if(n.dyn_ltree[2*d]!==0)return 1;return 0})(i)),Qe(i,i.l_desc),Qe(i,i.d_desc),s=(n=>{let d;for(er(n,n.dyn_ltree,n.l_desc.max_code),er(n,n.dyn_dtree,n.d_desc.max_code),Qe(n,n.bl_desc),d=18;d>=3&&n.bl_tree[2*ji[d]+1]===0;d--);return n.opt_len+=3*(d+1)+5+5+4,d})(i),o=i.opt_len+3+7>>>3,a=i.static_len+3+7>>>3,a<=o&&(o=a)):o=a=t+5,t+4<=o&&e!==-1?Ur(i,e,t,r):i.strategy===4||a===o?(Z(i,2+(r?1:0),3),tr(i,ft,ee)):(Z(i,4+(r?1:0),3),((n,d,l,c)=>{let _;for(Z(n,d-257,5),Z(n,l-1,5),Z(n,c-4,4),_=0;_<c;_++)Z(n,n.bl_tree[2*ji[_]+1],3);ir(n,n.dyn_ltree,d-1),ir(n,n.dyn_dtree,l-1)})(i,i.l_desc.max_code+1,i.d_desc.max_code+1,s+1),tr(i,i.dyn_ltree,i.dyn_dtree)),Br(i),r&&Fr(i)},fa=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[2*t]++:(i.matches++,e--,i.dyn_ltree[2*(ce[t]+Ei+1)]++,i.dyn_dtree[2*zr(e)]++),i.sym_next===i.sym_end),ma=i=>{Z(i,2,3),st(i,256,ft),(e=>{e.bi_valid===16?(he(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(i)},va={_tr_init:pa,_tr_stored_block:Ur,_tr_flush_block:ua,_tr_tally:fa,_tr_align:ma},pe=(i,e,t,r)=>{let o=65535&i|0,a=i>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do o=o+e[r++]|0,a=a+o|0;while(--s);o%=65521,a%=65521}return o|a<<16|0};const ga=new Uint32Array((()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var r=0;r<8;r++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e})());var N=(i,e,t,r)=>{const o=ga,a=r+t;i^=-1;for(let s=r;s<a;s++)i=i>>>8^o[255&(i^e[s])];return-1^i},zt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_a,_tr_stored_block:gi,_tr_flush_block:ba,_tr_tally:kt,_tr_align:ya}=va,{Z_NO_FLUSH:Et,Z_PARTIAL_FLUSH:xa,Z_FULL_FLUSH:wa,Z_FINISH:tt,Z_BLOCK:or,Z_OK:H,Z_STREAM_END:ar,Z_STREAM_ERROR:nt,Z_DATA_ERROR:ka,Z_BUF_ERROR:ti,Z_DEFAULT_COMPRESSION:Ea,Z_FILTERED:Sa,Z_HUFFMAN_ONLY:Ee,Z_RLE:Aa,Z_FIXED:Ra,Z_DEFAULT_STRATEGY:Ta,Z_UNKNOWN:Ca,Z_DEFLATED:Ne}=Vt,Ct=258,lt=262,Ht=42,It=113,Yt=666,$t=(i,e)=>(i.msg=zt[e],e),sr=i=>2*i-(i>4?9:0),xt=i=>{let e=i.length;for(;--e>=0;)i[e]=0},Ia=i=>{let e,t,r,o=i.w_size;e=i.hash_size,r=e;do t=i.head[--r],i.head[r]=t>=o?t-o:0;while(--e);e=o,r=e;do t=i.prev[--r],i.prev[r]=t>=o?t-o:0;while(--e)};let St=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask;const K=i=>{const e=i.state;let t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},j=(i,e)=>{ba(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,K(i.strm)},L=(i,e)=>{i.pending_buf[i.pending++]=e},Gt=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=255&e},_i=(i,e,t,r)=>{let o=i.avail_in;return o>r&&(o=r),o===0?0:(i.avail_in-=o,e.set(i.input.subarray(i.next_in,i.next_in+o),t),i.state.wrap===1?i.adler=pe(i.adler,e,o,t):i.state.wrap===2&&(i.adler=N(i.adler,e,o,t)),i.next_in+=o,i.total_in+=o,o)},Mr=(i,e)=>{let t,r,o=i.max_chain_length,a=i.strstart,s=i.prev_length,n=i.nice_match;const d=i.strstart>i.w_size-lt?i.strstart-(i.w_size-lt):0,l=i.window,c=i.w_mask,_=i.prev,f=i.strstart+Ct;let p=l[a+s-1],S=l[a+s];i.prev_length>=i.good_match&&(o>>=2),n>i.lookahead&&(n=i.lookahead);do if(t=e,l[t+s]===S&&l[t+s-1]===p&&l[t]===l[a]&&l[++t]===l[a+1]){a+=2,t++;do;while(l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&l[++a]===l[++t]&&a<f);if(r=Ct-(f-a),a=f-Ct,r>s){if(i.match_start=e,s=r,r>=n)break;p=l[a+s-1],S=l[a+s]}}while((e=_[e&c])>d&&--o!=0);return s<=i.lookahead?s:i.lookahead},qt=i=>{const e=i.w_size;let t,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-lt)&&(i.window.set(i.window.subarray(e,e+e-r),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),Ia(i),r+=e),i.strm.avail_in===0)break;if(t=_i(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=t,i.lookahead+i.insert>=3)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=St(i,i.ins_h,i.window[o+1]);i.insert&&(i.ins_h=St(i,i.ins_h,i.window[o+3-1]),i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<lt&&i.strm.avail_in!==0)},Nr=(i,e)=>{let t,r,o,a=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,s=0,n=i.strm.avail_in;do{if(t=65535,o=i.bi_valid+42>>3,i.strm.avail_out<o||(o=i.strm.avail_out-o,r=i.strstart-i.block_start,t>r+i.strm.avail_in&&(t=r+i.strm.avail_in),t>o&&(t=o),t<a&&(t===0&&e!==tt||e===Et||t!==r+i.strm.avail_in)))break;s=e===tt&&t===r+i.strm.avail_in?1:0,gi(i,0,0,s),i.pending_buf[i.pending-4]=t,i.pending_buf[i.pending-3]=t>>8,i.pending_buf[i.pending-2]=~t,i.pending_buf[i.pending-1]=~t>>8,K(i.strm),r&&(r>t&&(r=t),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+r),i.strm.next_out),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r,i.block_start+=r,t-=r),t&&(_i(i.strm,i.strm.output,i.strm.next_out,t),i.strm.next_out+=t,i.strm.avail_out-=t,i.strm.total_out+=t)}while(s===0);return n-=i.strm.avail_in,n&&(n>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=n&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-n,i.strm.next_in),i.strstart),i.strstart+=n,i.insert+=n>i.w_size-i.insert?i.w_size-i.insert:n),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),s?4:e!==Et&&e!==tt&&i.strm.avail_in===0&&i.strstart===i.block_start?2:(o=i.window_size-i.strstart,i.strm.avail_in>o&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,o+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),o>i.strm.avail_in&&(o=i.strm.avail_in),o&&(_i(i.strm,i.window,i.strstart,o),i.strstart+=o,i.insert+=o>i.w_size-i.insert?i.w_size-i.insert:o),i.high_water<i.strstart&&(i.high_water=i.strstart),o=i.bi_valid+42>>3,o=i.pending_buf_size-o>65535?65535:i.pending_buf_size-o,a=o>i.w_size?i.w_size:o,r=i.strstart-i.block_start,(r>=a||(r||e===tt)&&e!==Et&&i.strm.avail_in===0&&r<=o)&&(t=r>o?o:r,s=e===tt&&i.strm.avail_in===0&&t===r?1:0,gi(i,i.block_start,t,s),i.block_start+=t,K(i.strm)),s?3:1)},ei=(i,e)=>{let t,r;for(;;){if(i.lookahead<lt){if(qt(i),i.lookahead<lt&&e===Et)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=St(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-lt&&(i.match_length=Mr(i,t)),i.match_length>=3)if(r=kt(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=St(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=St(i,i.ins_h,i.window[i.strstart+1]);else r=kt(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(j(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,e===tt?(j(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(j(i,!1),i.strm.avail_out===0)?1:2},Bt=(i,e)=>{let t,r,o;for(;;){if(i.lookahead<lt){if(qt(i),i.lookahead<lt&&e===Et)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=St(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-lt&&(i.match_length=Mr(i,t),i.match_length<=5&&(i.strategy===Sa||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-3,r=kt(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=St(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,r&&(j(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if(r=kt(i,0,i.window[i.strstart-1]),r&&j(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=kt(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,e===tt?(j(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(j(i,!1),i.strm.avail_out===0)?1:2};function at(i,e,t,r,o){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=o}const Xt=[new at(0,0,0,0,Nr),new at(4,4,8,4,ei),new at(4,5,16,8,ei),new at(4,6,32,32,ei),new at(4,4,16,16,Bt),new at(8,16,32,32,Bt),new at(8,16,128,128,Bt),new at(8,32,128,256,Bt),new at(32,128,258,1024,Bt),new at(32,258,258,4096,Bt)];function $a(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ne,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ue=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.status!==Ht&&e.status!==57&&e.status!==69&&e.status!==73&&e.status!==91&&e.status!==103&&e.status!==It&&e.status!==Yt?1:0},Hr=i=>{if(ue(i))return $t(i,nt);i.total_in=i.total_out=0,i.data_type=Ca;const e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?57:e.wrap?Ht:It,i.adler=e.wrap===2?0:1,e.last_flush=-2,_a(e),H},qr=i=>{const e=Hr(i);return e===H&&(t=>{t.window_size=2*t.w_size,xt(t.head),t.max_lazy_match=Xt[t.level].max_lazy,t.good_match=Xt[t.level].good_length,t.nice_match=Xt[t.level].nice_length,t.max_chain_length=Xt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0})(i.state),e},nr=(i,e,t,r,o,a)=>{if(!i)return nt;let s=1;if(e===Ea&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||t!==Ne||r<8||r>15||e<0||e>9||a<0||a>Ra||r===8&&s!==1)return $t(i,nt);r===8&&(r=9);const n=new $a;return i.state=n,n.strm=i,n.status=Ht,n.wrap=s,n.gzhead=null,n.w_bits=r,n.w_size=1<<n.w_bits,n.w_mask=n.w_size-1,n.hash_bits=o+7,n.hash_size=1<<n.hash_bits,n.hash_mask=n.hash_size-1,n.hash_shift=~~((n.hash_bits+3-1)/3),n.window=new Uint8Array(2*n.w_size),n.head=new Uint16Array(n.hash_size),n.prev=new Uint16Array(n.w_size),n.lit_bufsize=1<<o+6,n.pending_buf_size=4*n.lit_bufsize,n.pending_buf=new Uint8Array(n.pending_buf_size),n.sym_buf=n.lit_bufsize,n.sym_end=3*(n.lit_bufsize-1),n.level=e,n.strategy=a,n.method=t,qr(i)};var La=(i,e)=>{if(ue(i)||e>or||e<0)return i?$t(i,nt):nt;const t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===Yt&&e!==tt)return $t(i,i.avail_out===0?ti:nt);const r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(K(i),i.avail_out===0)return t.last_flush=-1,H}else if(i.avail_in===0&&sr(e)<=sr(r)&&e!==tt)return $t(i,ti);if(t.status===Yt&&i.avail_in!==0)return $t(i,ti);if(t.status===Ht&&t.wrap===0&&(t.status=It),t.status===Ht){let o=Ne+(t.w_bits-8<<4)<<8,a=-1;if(a=t.strategy>=Ee||t.level<2?0:t.level<6?1:t.level===6?2:3,o|=a<<6,t.strstart!==0&&(o|=32),o+=31-o%31,Gt(t,o),t.strstart!==0&&(Gt(t,i.adler>>>16),Gt(t,65535&i.adler)),i.adler=1,t.status=It,K(i),t.pending!==0)return t.last_flush=-1,H}if(t.status===57){if(i.adler=0,L(t,31),L(t,139),L(t,8),t.gzhead)L(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),L(t,255&t.gzhead.time),L(t,t.gzhead.time>>8&255),L(t,t.gzhead.time>>16&255),L(t,t.gzhead.time>>24&255),L(t,t.level===9?2:t.strategy>=Ee||t.level<2?4:0),L(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(L(t,255&t.gzhead.extra.length),L(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=N(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(L(t,0),L(t,0),L(t,0),L(t,0),L(t,0),L(t,t.level===9?2:t.strategy>=Ee||t.level<2?4:0),L(t,3),t.status=It,K(i),t.pending!==0)return t.last_flush=-1,H}if(t.status===69){if(t.gzhead.extra){let o=t.pending,a=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let n=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+n),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(i.adler=N(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=n,K(i),t.pending!==0)return t.last_flush=-1,H;o=0,a-=n}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>o&&(i.adler=N(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(i.adler=N(i.adler,t.pending_buf,t.pending-a,a)),K(i),t.pending!==0)return t.last_flush=-1,H;a=0}o=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,L(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>a&&(i.adler=N(i.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(i.adler=N(i.adler,t.pending_buf,t.pending-a,a)),K(i),t.pending!==0)return t.last_flush=-1,H;a=0}o=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,L(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>a&&(i.adler=N(i.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(K(i),t.pending!==0))return t.last_flush=-1,H;L(t,255&i.adler),L(t,i.adler>>8&255),i.adler=0}if(t.status=It,K(i),t.pending!==0)return t.last_flush=-1,H}if(i.avail_in!==0||t.lookahead!==0||e!==Et&&t.status!==Yt){let o=t.level===0?Nr(t,e):t.strategy===Ee?((a,s)=>{let n;for(;;){if(a.lookahead===0&&(qt(a),a.lookahead===0)){if(s===Et)return 1;break}if(a.match_length=0,n=kt(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,n&&(j(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===tt?(j(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(j(a,!1),a.strm.avail_out===0)?1:2})(t,e):t.strategy===Aa?((a,s)=>{let n,d,l,c;const _=a.window;for(;;){if(a.lookahead<=Ct){if(qt(a),a.lookahead<=Ct&&s===Et)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(l=a.strstart-1,d=_[l],d===_[++l]&&d===_[++l]&&d===_[++l])){c=a.strstart+Ct;do;while(d===_[++l]&&d===_[++l]&&d===_[++l]&&d===_[++l]&&d===_[++l]&&d===_[++l]&&d===_[++l]&&d===_[++l]&&l<c);a.match_length=Ct-(c-l),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(n=kt(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(n=kt(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),n&&(j(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===tt?(j(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(j(a,!1),a.strm.avail_out===0)?1:2})(t,e):Xt[t.level].func(t,e);if(o!==3&&o!==4||(t.status=Yt),o===1||o===3)return i.avail_out===0&&(t.last_flush=-1),H;if(o===2&&(e===xa?ya(t):e!==or&&(gi(t,0,0,!1),e===wa&&(xt(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),K(i),i.avail_out===0))return t.last_flush=-1,H}return e!==tt?H:t.wrap<=0?ar:(t.wrap===2?(L(t,255&i.adler),L(t,i.adler>>8&255),L(t,i.adler>>16&255),L(t,i.adler>>24&255),L(t,255&i.total_in),L(t,i.total_in>>8&255),L(t,i.total_in>>16&255),L(t,i.total_in>>24&255)):(Gt(t,i.adler>>>16),Gt(t,65535&i.adler)),K(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?H:ar)},Oa=(i,e)=>{let t=e.length;if(ue(i))return nt;const r=i.state,o=r.wrap;if(o===2||o===1&&r.status!==Ht||r.lookahead)return nt;if(o===1&&(i.adler=pe(i.adler,e,t,0)),r.wrap=0,t>=r.w_size){o===0&&(xt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let d=new Uint8Array(r.w_size);d.set(e.subarray(t-r.w_size,t),0),e=d,t=r.w_size}const a=i.avail_in,s=i.next_in,n=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,qt(r);r.lookahead>=3;){let d=r.strstart,l=r.lookahead-2;do r.ins_h=St(r,r.ins_h,r.window[d+3-1]),r.prev[d&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=d,d++;while(--l);r.strstart=d,r.lookahead=2,qt(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,i.next_in=s,i.input=n,i.avail_in=a,r.wrap=o,H},ie={deflateInit:(i,e)=>nr(i,e,Ne,15,8,Ta),deflateInit2:nr,deflateReset:qr,deflateResetKeep:Hr,deflateSetHeader:(i,e)=>ue(i)||i.state.wrap!==2?nt:(i.state.gzhead=e,H),deflate:La,deflateEnd:i=>{if(ue(i))return nt;const e=i.state.status;return i.state=null,e===It?$t(i,ka):H},deflateSetDictionary:Oa,deflateInfo:"pako deflate (from Nodeca project)"};const za=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var He={assign:function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)za(t,r)&&(i[r]=t[r])}}return i},flattenChunks:i=>{let e=0;for(let r=0,o=i.length;r<o;r++)e+=i[r].length;const t=new Uint8Array(e);for(let r=0,o=0,a=i.length;r<a;r++){let s=i[r];t.set(s,o),o+=s.length}return t}};let Wr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wr=!1}const fe=new Uint8Array(256);for(let i=0;i<256;i++)fe[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;fe[254]=fe[254]=1;var me={string2buf:i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,r,o,a,s=i.length,n=0;for(o=0;o<s;o++)t=i.charCodeAt(o),(64512&t)==55296&&o+1<s&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),a=0,o=0;a<n;o++)t=i.charCodeAt(o),(64512&t)==55296&&o+1<s&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|63&t):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|63&t):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|63&t);return e},buf2string:(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let r,o;const a=new Array(2*t);for(o=0,r=0;r<t;){let s=i[r++];if(s<128){a[o++]=s;continue}let n=fe[s];if(n>4)a[o++]=65533,r+=n-1;else{for(s&=n===2?31:n===3?15:7;n>1&&r<t;)s=s<<6|63&i[r++],n--;n>1?a[o++]=65533:s<65536?a[o++]=s:(s-=65536,a[o++]=55296|s>>10&1023,a[o++]=56320|1023&s)}}return((s,n)=>{if(n<65534&&s.subarray&&Wr)return String.fromCharCode.apply(null,s.length===n?s:s.subarray(0,n));let d="";for(let l=0;l<n;l++)d+=String.fromCharCode(s[l]);return d})(a,o)},utf8border:(i,e)=>{(e=e||i.length)>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(192&i[t])==128;)t--;return t<0||t===0?e:t+fe[i[t]]>e?t:e}},Vr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Zr=Object.prototype.toString,{Z_NO_FLUSH:Da,Z_SYNC_FLUSH:Pa,Z_FULL_FLUSH:Ba,Z_FINISH:Fa,Z_OK:Pe,Z_STREAM_END:Ua,Z_DEFAULT_COMPRESSION:Ma,Z_DEFAULT_STRATEGY:Na,Z_DEFLATED:Ha}=Vt;function re(i){this.options=He.assign({level:Ma,method:Ha,chunkSize:16384,windowBits:15,memLevel:8,strategy:Na},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vr,this.strm.avail_out=0;let t=ie.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Pe)throw new Error(zt[t]);if(e.header&&ie.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(r=typeof e.dictionary=="string"?me.string2buf(e.dictionary):Zr.call(e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(e.dictionary):e.dictionary,t=ie.deflateSetDictionary(this.strm,r),t!==Pe)throw new Error(zt[t]);this._dict_set=!0}}function ii(i,e){const t=new re(e);if(t.push(i,!0),t.err)throw t.msg||zt[t.err];return t.result}re.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize;let o,a;if(this.ended)return!1;for(a=e===~~e?e:e===!0?Fa:Da,typeof i=="string"?t.input=me.string2buf(i):Zr.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===Pa||a===Ba)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(o=ie.deflate(t,a),o===Ua)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=ie.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Pe;if(t.avail_out!==0){if(a>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},re.prototype.onData=function(i){this.chunks.push(i)},re.prototype.onEnd=function(i){i===Pe&&(this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var qa={Deflate:re,deflate:ii,deflateRaw:function(i,e){return(e=e||{}).raw=!0,ii(i,e)},gzip:function(i,e){return(e=e||{}).gzip=!0,ii(i,e)},constants:Vt};const Se=16209;var Wa=function(i,e){let t,r,o,a,s,n,d,l,c,_,f,p,S,g,u,w,x,m,k,T,y,I,R,E;const C=i.state;t=i.next_in,R=i.input,r=t+(i.avail_in-5),o=i.next_out,E=i.output,a=o-(e-i.avail_out),s=o+(i.avail_out-257),n=C.dmax,d=C.wsize,l=C.whave,c=C.wnext,_=C.window,f=C.hold,p=C.bits,S=C.lencode,g=C.distcode,u=(1<<C.lenbits)-1,w=(1<<C.distbits)-1;t:do{p<15&&(f+=R[t++]<<p,p+=8,f+=R[t++]<<p,p+=8),x=S[f&u];e:for(;;){if(m=x>>>24,f>>>=m,p-=m,m=x>>>16&255,m===0)E[o++]=65535&x;else{if(!(16&m)){if(!(64&m)){x=S[(65535&x)+(f&(1<<m)-1)];continue e}if(32&m){C.mode=16191;break t}i.msg="invalid literal/length code",C.mode=Se;break t}k=65535&x,m&=15,m&&(p<m&&(f+=R[t++]<<p,p+=8),k+=f&(1<<m)-1,f>>>=m,p-=m),p<15&&(f+=R[t++]<<p,p+=8,f+=R[t++]<<p,p+=8),x=g[f&w];i:for(;;){if(m=x>>>24,f>>>=m,p-=m,m=x>>>16&255,!(16&m)){if(!(64&m)){x=g[(65535&x)+(f&(1<<m)-1)];continue i}i.msg="invalid distance code",C.mode=Se;break t}if(T=65535&x,m&=15,p<m&&(f+=R[t++]<<p,p+=8,p<m&&(f+=R[t++]<<p,p+=8)),T+=f&(1<<m)-1,T>n){i.msg="invalid distance too far back",C.mode=Se;break t}if(f>>>=m,p-=m,m=o-a,T>m){if(m=T-m,m>l&&C.sane){i.msg="invalid distance too far back",C.mode=Se;break t}if(y=0,I=_,c===0){if(y+=d-m,m<k){k-=m;do E[o++]=_[y++];while(--m);y=o-T,I=E}}else if(c<m){if(y+=d+c-m,m-=c,m<k){k-=m;do E[o++]=_[y++];while(--m);if(y=0,c<k){m=c,k-=m;do E[o++]=_[y++];while(--m);y=o-T,I=E}}}else if(y+=c-m,m<k){k-=m;do E[o++]=_[y++];while(--m);y=o-T,I=E}for(;k>2;)E[o++]=I[y++],E[o++]=I[y++],E[o++]=I[y++],k-=3;k&&(E[o++]=I[y++],k>1&&(E[o++]=I[y++]))}else{y=o-T;do E[o++]=E[y++],E[o++]=E[y++],E[o++]=E[y++],k-=3;while(k>2);k&&(E[o++]=E[y++],k>1&&(E[o++]=E[y++]))}break}}break}}while(t<r&&o<s);k=p>>3,t-=k,p-=k<<3,f&=(1<<p)-1,i.next_in=t,i.next_out=o,i.avail_in=t<r?r-t+5:5-(t-r),i.avail_out=o<s?s-o+257:257-(o-s),C.hold=f,C.bits=p};const Ae=15,Va=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Za=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ga=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ka=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var oe=(i,e,t,r,o,a,s,n)=>{const d=n.bits;let l,c,_,f,p,S,g=0,u=0,w=0,x=0,m=0,k=0,T=0,y=0,I=0,R=0,E=null;const C=new Uint16Array(16),F=new Uint16Array(16);let X,Rt,_t,bt=null;for(g=0;g<=Ae;g++)C[g]=0;for(u=0;u<r;u++)C[e[t+u]]++;for(m=d,x=Ae;x>=1&&C[x]===0;x--);if(m>x&&(m=x),x===0)return o[a++]=20971520,o[a++]=20971520,n.bits=1,0;for(w=1;w<x&&C[w]===0;w++);for(m<w&&(m=w),y=1,g=1;g<=Ae;g++)if(y<<=1,y-=C[g],y<0)return-1;if(y>0&&(i===0||x!==1))return-1;for(F[1]=0,g=1;g<Ae;g++)F[g+1]=F[g]+C[g];for(u=0;u<r;u++)e[t+u]!==0&&(s[F[e[t+u]]++]=u);if(i===0?(E=bt=s,S=20):i===1?(E=Va,bt=Za,S=257):(E=Ga,bt=Ka,S=0),R=0,u=0,g=w,p=a,k=m,T=0,_=-1,I=1<<m,f=I-1,i===1&&I>852||i===2&&I>592)return 1;for(;;){X=g-T,s[u]+1<S?(Rt=0,_t=s[u]):s[u]>=S?(Rt=bt[s[u]-S],_t=E[s[u]-S]):(Rt=96,_t=0),l=1<<g-T,c=1<<k,w=c;do c-=l,o[p+(R>>T)+c]=X<<24|Rt<<16|_t|0;while(c!==0);for(l=1<<g-1;R&l;)l>>=1;if(l!==0?(R&=l-1,R+=l):R=0,u++,--C[g]==0){if(g===x)break;g=e[t+s[u]]}if(g>m&&(R&f)!==_){for(T===0&&(T=m),p+=w,k=g-T,y=1<<k;k+T<x&&(y-=C[k+T],!(y<=0));)k++,y<<=1;if(I+=1<<k,i===1&&I>852||i===2&&I>592)return 1;_=R&f,o[_]=m<<24|k<<16|p-a|0}}return R!==0&&(o[p+R]=g-T<<24|64<<16|0),n.bits=m,0};const{Z_FINISH:lr,Z_BLOCK:ja,Z_TREES:Re,Z_OK:Lt,Z_STREAM_END:Ya,Z_NEED_DICT:Xa,Z_STREAM_ERROR:et,Z_DATA_ERROR:Gr,Z_MEM_ERROR:Kr,Z_BUF_ERROR:Ja,Z_DEFLATED:dr}=Vt,qe=16180,Be=16190,ht=16191,ri=16192,oi=16194,Te=16199,Ce=16200,ai=16206,D=16209,cr=i=>(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24);function Qa(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ot=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<qe||e.mode>16211?1:0},jr=i=>{if(Ot(i))return et;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=1&e.wrap),e.mode=qe,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Lt},Yr=i=>{if(Ot(i))return et;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,jr(i)},Xr=(i,e)=>{let t;if(Ot(i))return et;const r=i.state;return e<0?(t=0,e=-e):(t=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?et:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,Yr(i))},hr=(i,e)=>{if(!i)return et;const t=new Qa;i.state=t,t.strm=i,t.window=null,t.mode=qe;const r=Xr(i,e);return r!==Lt&&(i.state=null),r};let si,ni,pr=!0;const ts=i=>{if(pr){si=new Int32Array(512),ni=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(oe(1,i.lens,0,288,si,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;oe(2,i.lens,0,32,ni,0,i.work,{bits:5}),pr=!1}i.lencode=si,i.lenbits=9,i.distcode=ni,i.distbits=5},Jr=(i,e,t,r)=>{let o;const a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),a.window.set(e.subarray(t-r,t-r+o),a.wnext),(r-=o)?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0};var es=(i,e)=>{let t,r,o,a,s,n,d,l,c,_,f,p,S,g,u,w,x,m,k,T,y,I,R=0;const E=new Uint8Array(4);let C,F;const X=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ot(i)||!i.output||!i.input&&i.avail_in!==0)return et;t=i.state,t.mode===ht&&(t.mode=ri),s=i.next_out,o=i.output,d=i.avail_out,a=i.next_in,r=i.input,n=i.avail_in,l=t.hold,c=t.bits,_=n,f=d,I=Lt;t:for(;;)switch(t.mode){case qe:if(t.wrap===0){t.mode=ri;break}for(;c<16;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(2&t.wrap&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,E[0]=255&l,E[1]=l>>>8&255,t.check=N(t.check,E,2,0),l=0,c=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&l)<<8)+(l>>8))%31){i.msg="incorrect header check",t.mode=D;break}if((15&l)!==dr){i.msg="unknown compression method",t.mode=D;break}if(l>>>=4,c-=4,y=8+(15&l),t.wbits===0&&(t.wbits=y),y>15||y>t.wbits){i.msg="invalid window size",t.mode=D;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=512&l?16189:ht,l=0,c=0;break;case 16181:for(;c<16;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(t.flags=l,(255&t.flags)!==dr){i.msg="unknown compression method",t.mode=D;break}if(57344&t.flags){i.msg="unknown header flags set",t.mode=D;break}t.head&&(t.head.text=l>>8&1),512&t.flags&&4&t.wrap&&(E[0]=255&l,E[1]=l>>>8&255,t.check=N(t.check,E,2,0)),l=0,c=0,t.mode=16182;case 16182:for(;c<32;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.head&&(t.head.time=l),512&t.flags&&4&t.wrap&&(E[0]=255&l,E[1]=l>>>8&255,E[2]=l>>>16&255,E[3]=l>>>24&255,t.check=N(t.check,E,4,0)),l=0,c=0,t.mode=16183;case 16183:for(;c<16;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.head&&(t.head.xflags=255&l,t.head.os=l>>8),512&t.flags&&4&t.wrap&&(E[0]=255&l,E[1]=l>>>8&255,t.check=N(t.check,E,2,0)),l=0,c=0,t.mode=16184;case 16184:if(1024&t.flags){for(;c<16;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.length=l,t.head&&(t.head.extra_len=l),512&t.flags&&4&t.wrap&&(E[0]=255&l,E[1]=l>>>8&255,t.check=N(t.check,E,2,0)),l=0,c=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(p=t.length,p>n&&(p=n),p&&(t.head&&(y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+p),y)),512&t.flags&&4&t.wrap&&(t.check=N(t.check,r,p,a)),n-=p,a+=p,t.length-=p),t.length))break t;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(n===0)break t;p=0;do y=r[a+p++],t.head&&y&&t.length<65536&&(t.head.name+=String.fromCharCode(y));while(y&&p<n);if(512&t.flags&&4&t.wrap&&(t.check=N(t.check,r,p,a)),n-=p,a+=p,y)break t}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(n===0)break t;p=0;do y=r[a+p++],t.head&&y&&t.length<65536&&(t.head.comment+=String.fromCharCode(y));while(y&&p<n);if(512&t.flags&&4&t.wrap&&(t.check=N(t.check,r,p,a)),n-=p,a+=p,y)break t}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;c<16;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(4&t.wrap&&l!==(65535&t.check)){i.msg="header crc mismatch",t.mode=D;break}l=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=ht;break;case 16189:for(;c<32;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}i.adler=t.check=cr(l),l=0,c=0,t.mode=Be;case Be:if(t.havedict===0)return i.next_out=s,i.avail_out=d,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=c,Xa;i.adler=t.check=1,t.mode=ht;case ht:if(e===ja||e===Re)break t;case ri:if(t.last){l>>>=7&c,c-=7&c,t.mode=ai;break}for(;c<3;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}switch(t.last=1&l,l>>>=1,c-=1,3&l){case 0:t.mode=16193;break;case 1:if(ts(t),t.mode=Te,e===Re){l>>>=2,c-=2;break t}break;case 2:t.mode=16196;break;case 3:i.msg="invalid block type",t.mode=D}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){i.msg="invalid stored block lengths",t.mode=D;break}if(t.length=65535&l,l=0,c=0,t.mode=oi,e===Re)break t;case oi:t.mode=16195;case 16195:if(p=t.length,p){if(p>n&&(p=n),p>d&&(p=d),p===0)break t;o.set(r.subarray(a,a+p),s),n-=p,a+=p,d-=p,s+=p,t.length-=p;break}t.mode=ht;break;case 16196:for(;c<14;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(t.nlen=257+(31&l),l>>>=5,c-=5,t.ndist=1+(31&l),l>>>=5,c-=5,t.ncode=4+(15&l),l>>>=4,c-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=D;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;c<3;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.lens[X[t.have++]]=7&l,l>>>=3,c-=3}for(;t.have<19;)t.lens[X[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,C={bits:t.lenbits},I=oe(0,t.lens,0,19,t.lencode,0,t.work,C),t.lenbits=C.bits,I){i.msg="invalid code lengths set",t.mode=D;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[l&(1<<t.lenbits)-1],u=R>>>24,w=R>>>16&255,x=65535&R,!(u<=c);){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(x<16)l>>>=u,c-=u,t.lens[t.have++]=x;else{if(x===16){for(F=u+2;c<F;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(l>>>=u,c-=u,t.have===0){i.msg="invalid bit length repeat",t.mode=D;break}y=t.lens[t.have-1],p=3+(3&l),l>>>=2,c-=2}else if(x===17){for(F=u+3;c<F;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}l>>>=u,c-=u,y=0,p=3+(7&l),l>>>=3,c-=3}else{for(F=u+7;c<F;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}l>>>=u,c-=u,y=0,p=11+(127&l),l>>>=7,c-=7}if(t.have+p>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=D;break}for(;p--;)t.lens[t.have++]=y}}if(t.mode===D)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=D;break}if(t.lenbits=9,C={bits:t.lenbits},I=oe(1,t.lens,0,t.nlen,t.lencode,0,t.work,C),t.lenbits=C.bits,I){i.msg="invalid literal/lengths set",t.mode=D;break}if(t.distbits=6,t.distcode=t.distdyn,C={bits:t.distbits},I=oe(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,C),t.distbits=C.bits,I){i.msg="invalid distances set",t.mode=D;break}if(t.mode=Te,e===Re)break t;case Te:t.mode=Ce;case Ce:if(n>=6&&d>=258){i.next_out=s,i.avail_out=d,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=c,Wa(i,f),s=i.next_out,o=i.output,d=i.avail_out,a=i.next_in,r=i.input,n=i.avail_in,l=t.hold,c=t.bits,t.mode===ht&&(t.back=-1);break}for(t.back=0;R=t.lencode[l&(1<<t.lenbits)-1],u=R>>>24,w=R>>>16&255,x=65535&R,!(u<=c);){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(w&&!(240&w)){for(m=u,k=w,T=x;R=t.lencode[T+((l&(1<<m+k)-1)>>m)],u=R>>>24,w=R>>>16&255,x=65535&R,!(m+u<=c);){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}l>>>=m,c-=m,t.back+=m}if(l>>>=u,c-=u,t.back+=u,t.length=x,w===0){t.mode=16205;break}if(32&w){t.back=-1,t.mode=ht;break}if(64&w){i.msg="invalid literal/length code",t.mode=D;break}t.extra=15&w,t.mode=16201;case 16201:if(t.extra){for(F=t.extra;c<F;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;R=t.distcode[l&(1<<t.distbits)-1],u=R>>>24,w=R>>>16&255,x=65535&R,!(u<=c);){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(!(240&w)){for(m=u,k=w,T=x;R=t.distcode[T+((l&(1<<m+k)-1)>>m)],u=R>>>24,w=R>>>16&255,x=65535&R,!(m+u<=c);){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}l>>>=m,c-=m,t.back+=m}if(l>>>=u,c-=u,t.back+=u,64&w){i.msg="invalid distance code",t.mode=D;break}t.offset=x,t.extra=15&w,t.mode=16203;case 16203:if(t.extra){for(F=t.extra;c<F;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=D;break}t.mode=16204;case 16204:if(d===0)break t;if(p=f-d,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=D;break}p>t.wnext?(p-=t.wnext,S=t.wsize-p):S=t.wnext-p,p>t.length&&(p=t.length),g=t.window}else g=o,S=s-t.offset,p=t.length;p>d&&(p=d),d-=p,t.length-=p;do o[s++]=g[S++];while(--p);t.length===0&&(t.mode=Ce);break;case 16205:if(d===0)break t;o[s++]=t.length,d--,t.mode=Ce;break;case ai:if(t.wrap){for(;c<32;){if(n===0)break t;n--,l|=r[a++]<<c,c+=8}if(f-=d,i.total_out+=f,t.total+=f,4&t.wrap&&f&&(i.adler=t.check=t.flags?N(t.check,o,f,s-f):pe(t.check,o,f,s-f)),f=d,4&t.wrap&&(t.flags?l:cr(l))!==t.check){i.msg="incorrect data check",t.mode=D;break}l=0,c=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;c<32;){if(n===0)break t;n--,l+=r[a++]<<c,c+=8}if(4&t.wrap&&l!==(4294967295&t.total)){i.msg="incorrect length check",t.mode=D;break}l=0,c=0}t.mode=16208;case 16208:I=Ya;break t;case D:I=Gr;break t;case 16210:return Kr;default:return et}return i.next_out=s,i.avail_out=d,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=c,(t.wsize||f!==i.avail_out&&t.mode<D&&(t.mode<ai||e!==lr))&&Jr(i,i.output,i.next_out,f-i.avail_out),_-=i.avail_in,f-=i.avail_out,i.total_in+=_,i.total_out+=f,t.total+=f,4&t.wrap&&f&&(i.adler=t.check=t.flags?N(t.check,o,f,i.next_out-f):pe(t.check,o,f,i.next_out-f)),i.data_type=t.bits+(t.last?64:0)+(t.mode===ht?128:0)+(t.mode===Te||t.mode===oi?256:0),(_===0&&f===0||e===lr)&&I===Lt&&(I=Ja),I},mt={inflateReset:Yr,inflateReset2:Xr,inflateResetKeep:jr,inflateInit:i=>hr(i,15),inflateInit2:hr,inflate:es,inflateEnd:i=>{if(Ot(i))return et;let e=i.state;return e.window&&(e.window=null),i.state=null,Lt},inflateGetHeader:(i,e)=>{if(Ot(i))return et;const t=i.state;return 2&t.wrap?(t.head=e,e.done=!1,Lt):et},inflateSetDictionary:(i,e)=>{const t=e.length;let r,o,a;return Ot(i)?et:(r=i.state,r.wrap!==0&&r.mode!==Be?et:r.mode===Be&&(o=1,o=pe(o,e,t,0),o!==r.check)?Gr:(a=Jr(i,e,t,t),a?(r.mode=16210,Kr):(r.havedict=1,Lt)))},inflateInfo:"pako inflate (from Nodeca project)"},is=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Qr=Object.prototype.toString,{Z_NO_FLUSH:rs,Z_FINISH:os,Z_OK:ae,Z_STREAM_END:li,Z_NEED_DICT:di,Z_STREAM_ERROR:as,Z_DATA_ERROR:ur,Z_MEM_ERROR:ss}=Vt;function se(i){this.options=He.assign({chunkSize:65536,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||i&&i.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vr,this.strm.avail_out=0;let t=mt.inflateInit2(this.strm,e.windowBits);if(t!==ae)throw new Error(zt[t]);if(this.header=new is,mt.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=me.string2buf(e.dictionary):Qr.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=mt.inflateSetDictionary(this.strm,e.dictionary),t!==ae)))throw new Error(zt[t])}function ci(i,e){const t=new se(e);if(t.push(i),t.err)throw t.msg||zt[t.err];return t.result}se.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let a,s,n;if(this.ended)return!1;for(s=e===~~e?e:e===!0?os:rs,Qr.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=mt.inflate(t,s),a===di&&o&&(a=mt.inflateSetDictionary(t,o),a===ae?a=mt.inflate(t,s):a===ur&&(a=di));t.avail_in>0&&a===li&&t.state.wrap>0&&i[t.next_in]!==0;)mt.inflateReset(t),a=mt.inflate(t,s);switch(a){case as:case ur:case di:case ss:return this.onEnd(a),this.ended=!0,!1}if(n=t.avail_out,t.next_out&&(t.avail_out===0||a===li))if(this.options.to==="string"){let d=me.utf8border(t.output,t.next_out),l=t.next_out-d,c=me.buf2string(t.output,d);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(c)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(a!==ae||n!==0){if(a===li)return a=mt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},se.prototype.onData=function(i){this.chunks.push(i)},se.prototype.onEnd=function(i){i===ae&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var ns={Inflate:se,inflate:ci,inflateRaw:function(i,e){return(e=e||{}).raw=!0,ci(i,e)},ungzip:ci,constants:Vt};const{Deflate:bs,deflate:ls,deflateRaw:ys,gzip:xs}=qa,{Inflate:ds,inflate:ws,inflateRaw:ks,ungzip:Es}=ns;var fr,mr,cs=ls,hs=ds;class to{constructor(e,t=!1,r=!0){this.device=e,this.tracing=t,this.slipReaderEnabled=!1,this.leftOver=new Uint8Array(0),this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this._DTR_state=!1,this.slipReaderEnabled=r}getInfo(){const e=this.device.getInfo();return e.usbVendorId&&e.usbProductId?`WebSerial VendorID 0x${e.usbVendorId.toString(16)} ProductID 0x${e.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(e){const t=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${e}`;console.log(t),this.traceLog+=t+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(e){console.error("Failed to copy text:",e)}}hexify(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(e,t=!0){if(t&&e.length>16){let r="",o=e;for(;o.length>0;){const a=o.slice(0,16),s=String.fromCharCode(...a).split("").map(n=>n===" "||n>=" "&&n<="~"&&n!=="  "?n:".").join("");o=o.slice(16),r+=`
    ${this.hexify(a.slice(0,8))} ${this.hexify(a.slice(8))} | ${s}`}return r}return this.hexify(e)}slipWriter(e){const t=[];t.push(192);for(let r=0;r<e.length;r++)e[r]===219?t.push(219,221):e[r]===192?t.push(219,220):t.push(e[r]);return t.push(192),new Uint8Array(t)}async write(e){const t=this.slipWriter(e);if(this.device.writable){const r=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await r.write(t),r.releaseLock()}}_appendBuffer(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}slipReader(e){let t=0,r=0,o=0,a="init";for(;t<e.length;)if(a!=="init"||e[t]!=192){if(a==="valid_data"&&e[t]==192){o=t-1,a="packet_complete";break}t++}else r=t+1,a="valid_data",t++;if(a!=="packet_complete")return this.leftOver=e,new Uint8Array(0);this.leftOver=e.slice(o+2);const s=new Uint8Array(o-r+1);let n=0;for(t=r;t<=o;t++,n++)e[t]!==219||e[t+1]!==220?e[t]!==219||e[t+1]!==221?s[n]=e[t]:(s[n]=219,t++):(s[n]=192,t++);return s.slice(0,n)}async read(e=0,t=12){let r,o=this.leftOver;if(this.leftOver=new Uint8Array(0),this.slipReaderEnabled){const a=this.slipReader(o);if(a.length>0)return a;o=this.leftOver,this.leftOver=new Uint8Array(0)}if(this.device.readable==null)return this.leftOver;this.reader=this.device.readable.getReader();try{e>0&&(r=setTimeout(()=>{this.reader&&this.reader.cancel()},e));do{const{value:a,done:s}=await this.reader.read();if(s)throw this.leftOver=o,new Error("Timeout");o=new Uint8Array(this._appendBuffer(o.buffer,a.buffer))}while(o.length<t)}finally{e>0&&clearTimeout(r),this.reader.releaseLock()}if(this.tracing&&(console.log("Read bytes"),this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`)),this.slipReaderEnabled){const a=this.slipReader(o);return this.tracing&&(console.log("Slip reader results"),this.trace(`Read ${a.length} bytes: ${this.hexConvert(a)}`)),a}return o}async rawRead(e=0){if(this.leftOver.length!=0){const r=this.leftOver;return this.leftOver=new Uint8Array(0),r}if(!this.device.readable)return this.leftOver;let t;this.reader=this.device.readable.getReader();try{e>0&&(t=setTimeout(()=>{this.reader&&this.reader.cancel()},e));const{value:r,done:o}=await this.reader.read();return o||this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${r.length} bytes: ${this.hexConvert(r)}`)),r}finally{e>0&&clearTimeout(t),this.reader.releaseLock()}}async setRTS(e){await this.device.setSignals({requestToSend:e}),await this.setDTR(this._DTR_state)}async setDTR(e){this._DTR_state=e,await this.device.setSignals({dataTerminalReady:e})}async connect(e=115200,t={}){await this.device.open({baudRate:e,dataBits:t==null?void 0:t.dataBits,stopBits:t==null?void 0:t.stopBits,bufferSize:t==null?void 0:t.bufferSize,parity:t==null?void 0:t.parity,flowControl:t==null?void 0:t.flowControl}),this.baudrate=e,this.leftOver=new Uint8Array(0)}async sleep(e){return new Promise(t=>setTimeout(t,e))}async waitForUnlock(e){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(e)}async disconnect(){var e,t;!((e=this.device.readable)===null||e===void 0)&&e.locked&&await((t=this.reader)===null||t===void 0?void 0:t.cancel()),await this.waitForUnlock(400),this.reader=void 0,await this.device.close()}}function Le(i){return new Promise(e=>setTimeout(e,i))}async function ps(i,e){const t={D:async r=>await i.setDTR(r),R:async r=>await i.setRTS(r),W:async r=>await Le(r)};try{if(!function(o){const a=["D","R","W"],s=o.split("|");for(const n of s){const d=n[0],l=n.slice(1);if(!a.includes(d))return!1;if(d==="D"||d==="R"){if(l!=="0"&&l!=="1")return!1}else if(d==="W"){const c=parseInt(l);if(isNaN(c)||c<=0)return!1}}return!0}(e))return;const r=e.split("|");for(const o of r){const a=o[0],s=o.slice(1);a==="W"?await t.W(Number(s)):a!=="D"&&a!=="R"||await t[a](s==="1")}}catch{throw new Error("Invalid custom reset sequence")}}function us(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vr=us(mr?fr:(mr=1,fr=function(i){return atob(i)}));class fs{constructor(e){this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=2*this.CHIP_ERASE_TIMEOUT,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.checksum=function(t){let r,o=239;for(r=0;r<t.length;r++)o^=t[r];return o},this.timeoutPerMb=function(t,r){const o=t*(r/1e6);return o<3e3?3e3:o},this.flashSizeBytes=function(t){let r=-1;return t.indexOf("KB")!==-1?r=1024*parseInt(t.slice(0,t.indexOf("KB"))):t.indexOf("MB")!==-1&&(r=1024*parseInt(t.slice(0,t.indexOf("MB")))*1024),r},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=e.transport,this.baudrate=e.baudrate,e.serialOptions&&(this.serialOptions=e.serialOptions),e.romBaudrate&&(this.romBaudrate=e.romBaudrate),e.terminal&&(this.terminal=e.terminal,this.terminal.clean()),e.debugLogging!==void 0&&(this.debugLogging=e.debugLogging),e.port&&(this.transport=new to(e.port)),e.enableTracing!==void 0&&(this.transport.tracing=e.enableTracing),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(e){return new Promise(t=>setTimeout(t,e))}write(e,t=!0){this.terminal?t?this.terminal.writeLine(e):this.terminal.write(e):console.log(e)}error(e,t=!0){this.write(`Error: ${e}`,t)}info(e,t=!0){this.write(e,t)}debug(e,t=!0){this.debugLogging&&this.write(`Debug: ${e}`,t)}_shortToBytearray(e){return new Uint8Array([255&e,e>>8&255])}_intToByteArray(e){return new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])}_byteArrayToShort(e,t){return e|t>>8}_byteArrayToInt(e,t,r,o){return e|t<<8|r<<16|o<<24}_appendBuffer(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}_appendArray(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}ui8ToBstr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}bstrToUi8(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}async flushInput(){try{await this.transport.rawRead(200)}catch(e){this.error(e.message)}}async readPacket(e=null,t=3e3){for(let r=0;r<100;r++){const o=await this.transport.read(t),a=o[0],s=o[1],n=this._byteArrayToInt(o[4],o[5],o[6],o[7]),d=o.slice(8);if(a==1){if(e==null||s==e)return[n,d];if(d[0]!=0&&d[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new W("unsupported command error")}}throw new W("invalid response")}async command(e=null,t=new Uint8Array(0),r=0,o=!0,a=3e3){if(e!=null){this.transport.tracing&&this.transport.trace(`command op:0x${e.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${o?1:0} timeout=${(a/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);const s=new Uint8Array(8+t.length);let n;for(s[0]=0,s[1]=e,s[2]=this._shortToBytearray(t.length)[0],s[3]=this._shortToBytearray(t.length)[1],s[4]=this._intToByteArray(r)[0],s[5]=this._intToByteArray(r)[1],s[6]=this._intToByteArray(r)[2],s[7]=this._intToByteArray(r)[3],n=0;n<t.length;n++)s[8+n]=t[n];await this.transport.write(s)}return o?this.readPacket(e,a):[0,new Uint8Array(0)]}async readReg(e,t=3e3){const r=this._intToByteArray(e);return(await this.command(this.ESP_READ_REG,r,void 0,void 0,t))[0]}async writeReg(e,t,r=4294967295,o=0,a=0){let s=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(r)),s=this._appendArray(s,this._intToByteArray(o)),a>0&&(s=this._appendArray(s,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(a))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,s)}async sync(){this.debug("Sync");const e=new Uint8Array(36);let t;for(e[0]=7,e[1]=7,e[2]=18,e[3]=32,t=0;t<32;t++)e[4+t]=85;try{const r=await this.command(8,e,void 0,void 0,100);return this.syncStubDetected=this.syncStubDetected&&r[0]===0,r}catch(r){throw this.debug("Sync err "+r),r}}async _connectAttempt(e="default_reset",t=!1){if(this.debug("_connect_attempt "+e+" "+t),e!=="no_reset")if(this.transport.getPid()===this.USB_JTAG_SERIAL_PID)await async function(a){await a.setRTS(!1),await a.setDTR(!1),await Le(100),await a.setDTR(!0),await a.setRTS(!1),await Le(100),await a.setRTS(!0),await a.setDTR(!1),await a.setRTS(!0),await Le(100),await a.setRTS(!1),await a.setDTR(!1)}(this.transport);else{const a=t?"D0|R1|W100|W2000|D1|R0|W50|D0":"D0|R1|W100|D1|R0|W50|D0";await ps(this.transport,a)}let r=0,o=!0;for(;o;){try{r+=(await this.transport.read(1e3)).length}catch(a){if(this.debug(a.message),a instanceof Error){o=!1;break}}await this._sleep(50)}for(this.transport.slipReaderEnabled=!0,this.syncStubDetected=!0,r=7;r--;){try{const a=await this.sync();return this.debug(a[0].toString()),"success"}catch(a){a instanceof Error&&(t?this.info("_",!1):this.info(".",!1))}await this._sleep(50)}return"error"}async connect(e="default_reset",t=7,r=!1){let o,a;for(this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions),o=0;o<t&&(a=await this._connectAttempt(e,!1),a!=="success")&&(a=await this._connectAttempt(e,!0),a!=="success");o++);if(a!=="success")throw new W("Failed to connect with the device");if(this.info(`
\r`,!1),!r){const s=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+s.toString(16));const n=await async function(d){switch(d){case 15736195:{const{ESP32ROM:l}=await it(()=>import("./esp32-D9Bry5AK-C5_7PDVi.js"),__vite__mapDeps([0,1]));return new l}case 1867591791:case 2084675695:{const{ESP32C2ROM:l}=await it(()=>import("./esp32c2-CQCa5GlD-CPV-qOfO.js"),__vite__mapDeps([2,3,1]));return new l}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:l}=await it(()=>import("./esp32c3-B4sqWMZf-CImjvWL6.js"),__vite__mapDeps([3,1]));return new l}case 752910447:{const{ESP32C6ROM:l}=await it(()=>import("./esp32c6-DxAEWmNf-S0EuYfVC.js"),__vite__mapDeps([4,1]));return new l}case 871374959:case 606167151:{const{ESP32C61ROM:l}=await it(()=>import("./esp32c61-B5KEiyDP-CqwXT9mn.js"),__vite__mapDeps([5,4,1]));return new l}case 285294703:case 1675706479:{const{ESP32C5ROM:l}=await it(()=>import("./esp32c5-BA5SOTBL-DR6O3DnE.js"),__vite__mapDeps([6,4,1]));return new l}case 3619110528:{const{ESP32H2ROM:l}=await it(()=>import("./esp32h2-Bm3EZXXU-DY6-bP1c.js"),__vite__mapDeps([7,1]));return new l}case 9:{const{ESP32S3ROM:l}=await it(()=>import("./esp32s3-CX2uHP4t-DYWzCR4W.js"),__vite__mapDeps([8,1]));return new l}case 1990:{const{ESP32S2ROM:l}=await it(()=>import("./esp32s2-cKIjfSdO-DzTstvmK.js"),__vite__mapDeps([9,1]));return new l}case 4293968129:{const{ESP8266ROM:l}=await it(()=>import("./esp8266-DEFNY3lv-BiL7g1T8.js"),__vite__mapDeps([10,1]));return new l}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:l}=await it(()=>import("./esp32p4-B0KJRj5I-CQsQAWiP.js"),__vite__mapDeps([11,0,1]));return new l}default:return null}}(s);if(this.chip===null)throw new W(`Unexpected CHIP magic value ${s}. Failed to autodetect chip type.`);this.chip=n}}async detectChip(e="default_reset"){await this.connect(e),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(e="",t=null,r=new Uint8Array(0),o=0,a=3e3){this.debug("check_command "+e);const s=await this.command(t,r,o,void 0,a);return s[1].length>4?s[1]:s[0]}async memBegin(e,t,r,o){this.debug("mem_begin "+e+" "+t+" "+r+" "+o.toString(16));let a=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));a=this._appendArray(a,this._intToByteArray(r)),a=this._appendArray(a,this._intToByteArray(o)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,a)}async memBlock(e,t){let r=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,e);const o=this.checksum(e);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,r,o)}async memFinish(e){const t=e===0?1:0,r=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,r,void 0,50)}async flashSpiAttach(e){const t=this._intToByteArray(e);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}async flashBegin(e,t){const r=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),o=this.chip.getEraseSize(t,e),a=new Date,s=a.getTime();let n=3e3;this.IS_STUB==0&&(n=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,e)),this.debug("flash begin "+o+" "+r+" "+this.FLASH_WRITE_SIZE+" "+t+" "+e);let d=this._appendArray(this._intToByteArray(o),this._intToByteArray(r));d=this._appendArray(d,this._intToByteArray(this.FLASH_WRITE_SIZE)),d=this._appendArray(d,this._intToByteArray(t)),this.IS_STUB==0&&(d=this._appendArray(d,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,d,void 0,n);const l=a.getTime();return e!=0&&this.IS_STUB==0&&this.info("Took "+(l-s)/1e3+"."+(l-s)%1e3+"s to erase flash block"),r}async flashDeflBegin(e,t,r){const o=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=new Date,n=s.getTime();let d,l;this.IS_STUB?(d=e,l=3e3):(d=a*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,d)),this.info("Compressed "+e+" bytes to "+t+"...");let c=this._appendArray(this._intToByteArray(d),this._intToByteArray(o));c=this._appendArray(c,this._intToByteArray(this.FLASH_WRITE_SIZE)),c=this._appendArray(c,this._intToByteArray(r)),this.chip.CHIP_NAME!=="ESP32-S2"&&this.chip.CHIP_NAME!=="ESP32-S3"&&this.chip.CHIP_NAME!=="ESP32-C3"&&this.chip.CHIP_NAME!=="ESP32-C2"||this.IS_STUB!==!1||(c=this._appendArray(c,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,c,void 0,l);const _=s.getTime();return e!=0&&this.IS_STUB===!1&&this.info("Took "+(_-n)/1e3+"."+(_-n)%1e3+"s to erase flash block"),o}async flashBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const a=this.checksum(e);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,o,a,r)}async flashDeflBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const a=this.checksum(e);this.debug("flash_defl_block "+e[0].toString(16)+" "+e[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,o,a,r)}async flashFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,r)}async flashDeflFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,r)}async runSpiflashCommand(e,t,r){const o=this.chip.SPI_REG_BASE,a=o+0,s=o+this.chip.SPI_USR_OFFS,n=o+this.chip.SPI_USR1_OFFS,d=o+this.chip.SPI_USR2_OFFS,l=o+this.chip.SPI_W0_OFFS;let c;c=this.chip.SPI_MOSI_DLEN_OFFS!=null?async(m,k)=>{const T=o+this.chip.SPI_MOSI_DLEN_OFFS,y=o+this.chip.SPI_MISO_DLEN_OFFS;m>0&&await this.writeReg(T,m-1),k>0&&await this.writeReg(y,k-1)}:async(m,k)=>{const T=n,y=(k===0?0:k-1)<<8|(m===0?0:m-1)<<17;await this.writeReg(T,y)};const _=1<<18;if(r>32)throw new W("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new W("Writing more than 64 bytes of data with one SPI command is unsupported");const f=8*t.length,p=await this.readReg(s),S=await this.readReg(d);let g,u=1<<31;r>0&&(u|=268435456),f>0&&(u|=134217728),await c(f,r),await this.writeReg(s,u);let w=7<<28|e;if(await this.writeReg(d,w),f==0)await this.writeReg(l,0);else{if(t.length%4!=0){const k=new Uint8Array(t.length%4);t=this._appendArray(t,k)}let m=l;for(g=0;g<t.length-4;g+=4)w=this._byteArrayToInt(t[g],t[g+1],t[g+2],t[g+3]),await this.writeReg(m,w),m+=4}for(await this.writeReg(a,_),g=0;g<10&&(w=await this.readReg(a)&_,w!=0);g++);if(g===10)throw new W("SPI command did not complete in time");const x=await this.readReg(l);return await this.writeReg(s,p),await this.writeReg(d,S),x}async readFlashId(){const e=new Uint8Array(0);return await this.runSpiflashCommand(159,e,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let e=new Date;const t=e.getTime(),r=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);e=new Date;const o=e.getTime();return this.info("Chip erase completed successfully in "+(o-t)/1e3+"s"),r}toHex(e){return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(e,t){const r=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t);let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0));let a=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,o,void 0,r);return a instanceof Uint8Array&&a.length>16&&(a=a.slice(0,16)),this.toHex(a)}async readFlash(e,t,r=null){let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(4096)),o=this._appendArray(o,this._intToByteArray(1024));const a=await this.checkCommand("read flash",this.ESP_READ_FLASH,o);if(a!=0)throw new W("Failed to read memory: "+a);let s=new Uint8Array(0);for(;s.length<t;){const n=await this.transport.read(this.FLASH_READ_TIMEOUT);if(!(n instanceof Uint8Array))throw new W("Failed to read memory: "+n);n.length>0&&(s=this._appendArray(s,n),await this.transport.write(this._intToByteArray(s.length)),r&&r(n,s.length,t))}return s}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");let e=vr(this.chip.ROM_TEXT),t=e.split("").map(function(n){return n.charCodeAt(0)});const r=new Uint8Array(t);e=vr(this.chip.ROM_DATA),t=e.split("").map(function(n){return n.charCodeAt(0)});const o=new Uint8Array(t);let a,s=Math.floor((r.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK);for(await this.memBegin(r.length,s,this.ESP_RAM_BLOCK,this.chip.TEXT_START),a=0;a<s;a++){const n=a*this.ESP_RAM_BLOCK,d=n+this.ESP_RAM_BLOCK;await this.memBlock(r.slice(n,d),a)}for(s=Math.floor((o.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.memBegin(o.length,s,this.ESP_RAM_BLOCK,this.chip.DATA_START),a=0;a<s;a++){const n=a*this.ESP_RAM_BLOCK,d=n+this.ESP_RAM_BLOCK;await this.memBlock(o.slice(n,d),a)}this.info("Running stub..."),await this.memFinish(this.chip.ENTRY);for(let n=0;n<100;n++){const d=await this.transport.read(1e3,6);if(d[0]===79&&d[1]===72&&d[2]===65&&d[3]===73)return this.info("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new W("Failed to start stub. Unexpected response")}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const e=this.IS_STUB?this.transport.baudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(e)),r=await this.command(this.ESP_CHANGE_BAUDRATE,t);this.debug(r[0].toString()),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions);try{let o=64;for(;o--;){try{await this.sync();break}catch(a){this.debug(a.message)}await this._sleep(10)}}catch(o){this.debug(o.message)}}async main(e="default_reset"){await this.detectChip(e);const t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),this.chip.postConnect!==void 0&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(e){if(this.chip.FLASH_SIZES[e]===void 0)throw new W("Flash size "+e+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[e]}_updateImageFlashParams(e,t,r,o,a){if(this.debug("_update_image_flash_params "+r+" "+o+" "+a),e.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return e;if(r==="keep"&&o==="keep"&&a==="keep")return this.info("Not changing the image"),e;const s=parseInt(e[0]);let n=parseInt(e[2]);const d=parseInt(e[3]);if(s!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),e;o!=="keep"&&(n={qio:0,qout:1,dio:2,dout:3}[o]);let l=15&d;a!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[a]);let c=240&d;r!=="keep"&&(c=this.parseFlashSizeArg(r));const _=n<<8|l+c;return this.info("Flash params set to "+_.toString(16)),parseInt(e[2])!==n<<8&&(e=e.substring(0,2)+(n<<8).toString()+e.substring(3)),parseInt(e[3])!==l+c&&(e=e.substring(0,3)+(l+c).toString()+e.substring(4)),e}async writeFlash(e){if(this.debug("EspLoader program"),e.flashSize!=="keep"){const o=this.flashSizeBytes(e.flashSize);for(let a=0;a<e.fileArray.length;a++)if(e.fileArray[a].data.length+e.fileArray[a].address>o)throw new W(`File ${a+1} doesn't fit in the available flash`)}let t,r;this.IS_STUB===!0&&e.eraseAll===!0&&await this.eraseFlash();for(let o=0;o<e.fileArray.length;o++){this.debug("Data Length "+e.fileArray[o].data.length),t=e.fileArray[o].data;const a=e.fileArray[o].data.length%4;if(a>0&&(t+="".substring(4-a)),r=e.fileArray[o].address,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this._updateImageFlashParams(t,r,e.flashSize,e.flashMode,e.flashFreq);let s=null;e.calculateMD5Hash&&(s=e.calculateMD5Hash(t),this.debug("Image MD5 "+s));const n=t.length;let d;if(e.compress){const x=this.bstrToUi8(t);t=this.ui8ToBstr(cs(x,{level:9})),d=await this.flashDeflBegin(n,t.length,r)}else d=await this.flashBegin(n,r);let l=0,c=0;const _=t.length;e.reportProgress&&e.reportProgress(o,0,_);let f=new Date;const p=f.getTime();let S=5e3;const g=new hs({chunkSize:1});let u=0;for(g.onData=function(x){u+=x.byteLength};t.length>0;){this.debug("Write loop "+r+" "+l+" "+d),this.info("Writing at 0x"+(r+u).toString(16)+"... ("+Math.floor(100*(l+1)/d)+"%)");const x=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(!e.compress)throw new W("Yet to handle Non Compressed writes");{const m=u;g.push(x,!1);const k=u-m;let T=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,k)>3e3&&(T=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,k)),this.IS_STUB===!1&&(S=T),await this.flashDeflBlock(x,l,S),this.IS_STUB&&(S=T)}c+=x.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),l++,e.reportProgress&&e.reportProgress(o,c,_)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,S),f=new Date;const w=f.getTime()-p;if(e.compress&&this.info("Wrote "+n+" bytes ("+c+" compressed) at 0x"+r.toString(16)+" in "+w/1e3+" seconds."),s){const x=await this.flashMd5sum(r,n);if(new String(x).valueOf()!=new String(s).valueOf())throw this.info("File  md5: "+s),this.info("Flash md5: "+x),new W("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),e.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const e=await this.readFlashId();this.info("Manufacturer: "+(255&e).toString(16));const t=e>>16&255;this.info("Device: "+(e>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");const e=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[e]}async hardReset(){await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)}async softReset(){if(this.IS_STUB){if(this.chip.CHIP_NAME!="ESP8266")throw new W("Soft resetting is currently only supported on ESP8266");await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}else await this.flashBegin(0,0),await this.flashFinish(!1)}}const Ft=async i=>{await i.device.setSignals({dataTerminalReady:!1,requestToSend:!0}),await vt(250),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!1}),await vt(250)},ms=(i,e="")=>{const t=new Blob([i],{type:"text/plain"}),r=URL.createObjectURL(t);((o,a="")=>{const s=document.createElement("a");s.target="_blank",s.href=o,s.download=a,document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click")),document.body.removeChild(s)})(r,e),setTimeout(()=>URL.revokeObjectURL(r),0)};console.log("ESP Web Tools 10.0.1 by Nabu Casa; https://esphome.github.io/esp-web-tools/");class J extends B{constructor(){super(...arguments),this.logger=console,this._state="DASHBOARD",this._installErase=!1,this._installConfirmed=!1,this._provisionForce=!1,this._wasProvisioned=!1,this._busy=!1,this._selectedSsid=null,this._bodyOverflow=null,this._handleDisconnect=()=>{this._state="ERROR",this._error="Disconnected"}}render(){if(!this.port)return b``;let e,t,r=!1;return this._client===void 0&&this._state!=="INSTALL"&&this._state!=="LOGS"?this._error?[e,t]=this._renderError(this._error):t=this._renderProgress("Connecting"):this._state==="INSTALL"?[e,t,r]=this._renderInstall():this._state==="ASK_ERASE"?[e,t]=this._renderAskErase():this._state==="ERROR"?[e,t]=this._renderError(this._error):this._state==="DASHBOARD"?[e,t,r]=this._client?this._renderDashboard():this._renderDashboardNoImprov():this._state==="PROVISION"?[e,t]=this._renderProvision():this._state==="LOGS"&&([e,t]=this._renderLogs()),b`
      <ew-dialog
        open
        .heading=${e}
        @cancel=${this._preventDefault}
        @closed=${this._handleClose}
      >
        ${e?b`<div slot="headline">${e}</div>`:""}
        ${r?b`
              <ew-icon-button slot="headline" @click=${this._closeDialog}>
                ${aa}
              </ew-icon-button>
            `:""}
        ${t}
      </ew-dialog>
    `}_renderProgress(e,t){return b`
      <ewt-page-progress
        slot="content"
        .label=${e}
        .progress=${t}
      ></ewt-page-progress>
    `}_renderError(e){return["Error",b`
      <ewt-page-message
        slot="content"
        .icon=${""}
        .label=${e}
      ></ewt-page-message>
      <div slot="actions">
        <ew-text-button @click=${this._closeDialog}>Close</ew-text-button>
      </div>
    `]}_renderDashboard(){const e=this._manifest.name;let t;return t=b`
      <div slot="content">
        <ew-list>
          <ew-list-item>
            <div slot="headline">Connected to ${this._info.name}</div>
            <div slot="supporting-text">
              ${this._info.firmware}&nbsp;${this._info.version}
              (${this._info.chipFamily})
            </div>
          </ew-list-item>
          ${this._isSameVersion?"":b`
                <ew-list-item
                  type="button"
                  @click=${()=>{this._isSameFirmware?this._startInstall(!1):this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
                >
                  ${Wi}
                  <div slot="headline">
                    ${this._isSameFirmware?`Update ${this._manifest.name}`:`Install ${this._manifest.name}`}
                  </div>
                </ew-list-item>
              `}
          ${this._client.nextUrl===void 0?"":b`
                <ew-list-item
                  type="link"
                  href=${this._client.nextUrl}
                  target="_blank"
                >
                  ${Zi}
                  <div slot="headline">Visit Device</div>
                </ew-list-item>
              `}
          ${this._manifest.home_assistant_domain&&this._client.state===yt.PROVISIONED?b`
                <ew-list-item
                  type="link"
                  href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                  target="_blank"
                >
                  ${Gi}
                  <div slot="headline">Add to Home Assistant</div>
                </ew-list-item>
              `:""}
          <ew-list-item
            type="button"
            @click=${()=>{this._state="PROVISION",this._client.state===yt.PROVISIONED&&(this._provisionForce=!0)}}
          >
            ${na}
            <div slot="headline">
              ${this._client.state===yt.READY?"Connect to Wi-Fi":"Change Wi-Fi"}
            </div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{const r=this._client;r&&(await this._closeClientWithoutEvents(r),await vt(100)),this._client=void 0,this._state="LOGS"}}
          >
            ${Vi}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
          ${this._isSameFirmware&&this._manifest.funding_url?b`
                <ew-list-item
                  type="link"
                  href=${this._manifest.funding_url}
                  target="_blank"
                >
                  <div slot="headline">Fund Development</div>
                </ew-list-item>
              `:""}
          ${this._isSameVersion?b`
                <ew-list-item
                  type="button"
                  class="danger"
                  @click=${()=>this._startInstall(!0)}
                >
                  <div slot="headline">Erase User Data</div>
                </ew-list-item>
              `:""}
        </ew-list>
      </div>
    `,[e,t,!0]}_renderDashboardNoImprov(){const e=this._manifest.name;let t;return t=b`
      <div slot="content">
        <ew-list>
          <ew-list-item
            type="button"
            @click=${()=>{this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
          >
            ${Wi}
            <div slot="headline">${`Install ${this._manifest.name}`}</div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{this._client=void 0,this._state="LOGS"}}
          >
            ${Vi}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
        </ew-list>
      </div>
    `,[e,t,!0]}_renderProvision(){var e;let t,r="Configure Wi-Fi";if(this._busy)return[r,this._renderProgress(this._ssids===void 0?"Scanning for networks":"Trying to connect")];if(this._provisionForce||this._client.state!==yt.PROVISIONED){let o;switch(this._client.error){case 3:o="Unable to connect";break;case 254:o="Timeout";break;case 0:case 2:break;default:o=`Unknown error (${this._client.error})`}const a=(e=this._ssids)===null||e===void 0?void 0:e.find(s=>s.name===this._selectedSsid);t=b`
        <ew-icon-button slot="headline" @click=${this._updateSsids}>
          ${sa}
        </ew-icon-button>
        <div slot="content">
          <div>Connect your device to the network to start using it.</div>
          ${o?b`<p class="error">${o}</p>`:""}
          ${this._ssids!==null?b`
                <ew-filled-select
                  menu-positioning="fixed"
                  label="Network"
                  @change=${s=>{const n=s.target.selectedIndex;this._selectedSsid=n===this._ssids.length?null:this._ssids[n].name}}
                >
                  ${this._ssids.map(s=>b`
                      <ew-select-option
                        .selected=${a===s}
                        .value=${s.name}
                      >
                        ${s.name}
                      </ew-select-option>
                    `)}
                  <ew-divider></ew-divider>
                  <ew-select-option .selected=${!a}>
                    Join other
                  </ew-select-option>
                </ew-filled-select>
              `:""}
          ${a?"":b`
                  <ew-filled-text-field
                    label="Network Name"
                    name="ssid"
                  ></ew-filled-text-field>
                `}
          ${!a||a.secured?b`
                <ew-filled-text-field
                  label="Password"
                  name="password"
                  type="password"
                ></ew-filled-text-field>
              `:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            ${this._installState&&this._installErase?"Skip":"Back"}
          </ew-text-button>
          <ew-text-button @click=${this._doProvision}>Connect</ew-text-button>
        </div>
      `}else{r=void 0;const o=!this._wasProvisioned&&(this._client.nextUrl!==void 0||"home_assistant_domain"in this._manifest);t=b`
        <div slot="content">
          <ewt-page-message
            .icon=${""}
            label="Device connected to the network!"
          ></ewt-page-message>
          ${o?b`
                <ew-list>
                  ${this._client.nextUrl===void 0?"":b`
                        <ew-list-item
                          type="link"
                          href=${this._client.nextUrl}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${Zi}
                          <div slot="headline">Visit Device</div>
                        </ew-list-item>
                      `}
                  ${this._manifest.home_assistant_domain?b`
                        <ew-list-item
                          type="link"
                          href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${Gi}
                          <div slot="headline">Add to Home Assistant</div>
                        </ew-list-item>
                      `:""}
                  <ew-list-item
                    type="button"
                    @click=${()=>{this._state="DASHBOARD"}}
                  >
                    <div slot="start" class="fake-icon"></div>
                    <div slot="headline">Skip</div>
                  </ew-list-item>
                </ew-list>
              `:""}
        </div>

        ${o?"":b`
              <div slot="actions">
                <ew-text-button
                  @click=${()=>{this._state="DASHBOARD"}}
                >
                  Continue
                </ew-text-button>
              </div>
            `}
      `}return[r,t]}_renderAskErase(){return["Erase device",b`
      <div slot="content">
        <div>
          Do you want to erase the device before installing
          ${this._manifest.name}? All data on the device will be lost.
        </div>
        <label class="formfield">
          <ew-checkbox touch-target="wrapper" class="danger"></ew-checkbox>
          Erase device
        </label>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${()=>{this._state="DASHBOARD"}}
        >
          Back
        </ew-text-button>
        <ew-text-button
          @click=${()=>{const e=this.shadowRoot.querySelector("ew-checkbox");this._startInstall(e.checked)}}
        >
          Next
        </ew-text-button>
      </div>
    `]}_renderInstall(){let e,t;const r=!this._installErase&&this._isSameFirmware;if(!this._installConfirmed&&this._isSameVersion)e="Erase User Data",t=b`
        <div slot="content">
          Do you want to reset your device and erase all user data from your
          device?
        </div>
        <div slot="actions">
          <ew-text-button class="danger" @click=${this._confirmInstall}>
            Erase User Data
          </ew-text-button>
        </div>
      `;else if(this._installConfirmed)if(this._installState&&this._installState.state!=="initializing"&&this._installState.state!=="preparing")if(this._installState.state==="erasing")e="Installing",t=this._renderProgress("Erasing");else if(this._installState.state==="writing"||this._installState.state==="finished"&&this._client===void 0){let o,a;e="Installing",this._installState.state==="finished"?a="Wrapping up":this._installState.details.percentage<4?a="Installing":o=this._installState.details.percentage,t=this._renderProgress(b`
          ${a?b`${a}<br />`:""}
          <br />
          This will take
          ${this._installState.chipFamily==="ESP8266"?"a minute":"2 minutes"}.<br />
          Keep this page visible to prevent slow down
        `,o)}else if(this._installState.state==="finished"){e=void 0;const o=this._client!==null;t=b`
        <ewt-page-message
          slot="content"
          .icon=${""}
          label="Installation complete!"
        ></ewt-page-message>

        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state=o&&this._installErase?"PROVISION":"DASHBOARD"}}
          >
            Next
          </ew-text-button>
        </div>
      `}else this._installState.state==="error"&&(e="Installation failed",t=b`
        <ewt-page-message
          slot="content"
          .icon=${""}
          .label=${this._installState.message}
        ></ewt-page-message>
        <div slot="actions">
          <ew-text-button
            @click=${async()=>{this._initialize(),this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
        </div>
      `);else e="Installing",t=this._renderProgress("Preparing installation");else{e="Confirm Installation";const o=r?"update to":"install";t=b`
        <div slot="content">
          ${r?b`Your device is running
                ${this._info.firmware}&nbsp;${this._info.version}.<br /><br />`:""}
          Do you want to ${o}
          ${this._manifest.name}&nbsp;${this._manifest.version}?
          ${this._installErase?b`<br /><br />All data on the device will be erased.`:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
          <ew-text-button @click=${this._confirmInstall}>
            Install
          </ew-text-button>
        </div>
      `}return[e,t,!1]}_renderLogs(){let e;return e=b`
      <div slot="content">
        <ewt-console .port=${this.port} .logger=${this.logger}></ewt-console>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Reset Device
        </ew-text-button>
        <ew-text-button
          @click=${()=>{ms(this.shadowRoot.querySelector("ewt-console").logs(),"esp-web-tools-logs.txt"),this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Download Logs
        </ew-text-button>
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").disconnect(),this._state="DASHBOARD",this._initialize()}}
        >
          Back
        </ew-text-button>
      </div>
    `,["Logs",e]}willUpdate(e){e.has("_state")&&(this._state!=="ERROR"&&(this._error=void 0),this._state==="PROVISION"?this._updateSsids():this._provisionForce=!1,this._state==="INSTALL"&&(this._installConfirmed=!1,this._installState=void 0))}async _updateSsids(e=0){const t=this._ssids;let r;this._ssids=void 0,this._busy=!0;try{r=await this._client.scan()}catch{return this._ssids===void 0&&(this._ssids=null,this._selectedSsid=null),void(this._busy=!1)}if(r.length===0&&e<3)return console.log("SCHEDULE RETRY",e),void setTimeout(()=>this._updateSsids(e+1),1e3);t?this._selectedSsid&&!r.find(o=>o.name===this._selectedSsid)&&(this._selectedSsid=r[0].name):this._selectedSsid=r.length?r[0].name:null,this._ssids=r,this._busy=!1}firstUpdated(e){super.firstUpdated(e),this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this._initialize()}updated(e){super.updated(e),e.has("_state")&&this.setAttribute("state",this._state),this._state==="PROVISION"&&(e.has("_selectedSsid")&&this._selectedSsid===null?this._focusFormElement("ew-filled-text-field[name=ssid]"):e.has("_ssids")&&this._focusFormElement())}_focusFormElement(e="ew-filled-text-field, ew-filled-select"){const t=this.shadowRoot.querySelector(e);t&&t.updateComplete.then(()=>setTimeout(()=>t.focus(),100))}async _initialize(e=!1){if(this.port.readable===null||this.port.writable===null)return this._state="ERROR",void(this._error="Serial port is not readable/writable. Close any other application using it and try again.");try{this._manifest=await(async r=>{const o=new URL(r,location.toString()).toString(),a=await fetch(o),s=await a.json();return"new_install_skip_erase"in s&&(console.warn('Manifest option "new_install_skip_erase" is deprecated. Use "new_install_prompt_erase" instead.'),s.new_install_skip_erase&&(s.new_install_prompt_erase=!0)),s})(this.manifestPath)}catch{return this._state="ERROR",void(this._error="Failed to download manifest")}if(this._manifest.new_install_improv_wait_time===0)return void(this._client=null);const t=new ca(this.port,this.logger);t.addEventListener("state-changed",()=>{this.requestUpdate()}),t.addEventListener("error-changed",()=>this.requestUpdate());try{const r=e?this._manifest.new_install_improv_wait_time!==void 0?1e3*this._manifest.new_install_improv_wait_time:1e4:1e3;this._info=await t.initialize(r),this._client=t,t.addEventListener("disconnect",this._handleDisconnect)}catch(r){this._info=void 0,r instanceof Lr?(this._state="ERROR",this._error="Serial port is not ready. Close any other application using it and try again."):(this._client=null,this.logger.error("Improv initialization failed.",r))}}_startInstall(e){this._state="INSTALL",this._installErase=e,this._installConfirmed=!1}async _confirmInstall(){this._installConfirmed=!0,this._installState=void 0,this._client&&await this._closeClientWithoutEvents(this._client),this._client=void 0,await this.port.close(),(async(e,t,r,o,a)=>{let s,n;const d=u=>e({...u,manifest:o,build:s,chipFamily:n}),l=new to(t),c=new fs({transport:l,baudrate:115200,romBaudrate:115200,enableTracing:!1});window.esploader=c,d({state:"initializing",message:"Initializing...",details:{done:!1}});try{await c.main(),await c.flashId()}catch(u){return console.error(u),d({state:"error",message:"Failed to initialize. Try resetting your device or holding the BOOT button while clicking INSTALL.",details:{error:"failed_initialize",details:u}}),await Ft(l),void await l.disconnect()}if(n=c.chip.CHIP_NAME,!c.chip.ROM_TEXT)return d({state:"error",message:`Chip ${n} is not supported`,details:{error:"not_supported",details:`Chip ${n} is not supported`}}),await Ft(l),void await l.disconnect();if(d({state:"initializing",message:`Initialized. Found ${n}`,details:{done:!0}}),s=o.builds.find(u=>u.chipFamily===n),!s)return d({state:"error",message:`Your ${n} board is not supported.`,details:{error:"not_supported",details:n}}),await Ft(l),void await l.disconnect();d({state:"preparing",message:"Preparing installation...",details:{done:!1}});const _=new URL(r,location.toString()).toString(),f=s.parts.map(async u=>{const w=new URL(u.path,_).toString(),x=await fetch(w);if(!x.ok)throw new Error(`Downlading firmware ${u.path} failed: ${x.status}`);const m=new FileReader,k=await x.blob();return new Promise(T=>{m.addEventListener("load",()=>T(m.result)),m.readAsBinaryString(k)})}),p=[];let S=0;for(let u=0;u<f.length;u++)try{const w=await f[u];p.push({data:w,address:s.parts[u].offset}),S+=w.length}catch(w){return d({state:"error",message:w.message,details:{error:"failed_firmware_download",details:w.message}}),await Ft(l),void await l.disconnect()}d({state:"preparing",message:"Installation prepared",details:{done:!0}}),a&&(d({state:"erasing",message:"Erasing device...",details:{done:!1}}),await c.eraseFlash(),d({state:"erasing",message:"Device erased",details:{done:!0}})),d({state:"writing",message:"Writing progress: 0%",details:{bytesTotal:S,bytesWritten:0,percentage:0}});let g=0;try{await c.writeFlash({fileArray:p,flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0,reportProgress:(u,w,x)=>{const m=w/x*p[u].data.length,k=Math.floor((g+m)/S*100);w!==x?d({state:"writing",message:`Writing progress: ${k}%`,details:{bytesTotal:S,bytesWritten:g+w,percentage:k}}):g+=m}})}catch(u){return d({state:"error",message:u.message,details:{error:"write_failed",details:u}}),await Ft(l),void await l.disconnect()}d({state:"writing",message:"Writing complete",details:{bytesTotal:S,bytesWritten:g,percentage:100}}),await vt(100),console.log("HARD RESET"),await Ft(l),console.log("DISCONNECT"),await l.disconnect(),d({state:"finished",message:"All done!"})})(e=>{this._installState=e,e.state==="finished"?vt(100).then(()=>this.port.open({baudRate:115200})).then(()=>this._initialize(!0)).then(()=>this.requestUpdate()):e.state==="error"&&vt(100).then(()=>this.port.open({baudRate:115200}))},this.port,this.manifestPath,this._manifest,this._installErase)}async _doProvision(){var e;this._busy=!0,this._wasProvisioned=this._client.state===yt.PROVISIONED;const t=this._selectedSsid===null?this.shadowRoot.querySelector("ew-filled-text-field[name=ssid]").value:this._selectedSsid,r=((e=this.shadowRoot.querySelector("ew-filled-text-field[name=password]"))===null||e===void 0?void 0:e.value)||"";try{await this._client.provision(t,r,3e4)}catch{return}finally{this._busy=!1,this._provisionForce=!1}}_closeDialog(){this.shadowRoot.querySelector("ew-dialog").close()}async _handleClose(){this._client&&await this._closeClientWithoutEvents(this._client),((e,t,r,o)=>{o=o||{};const a=new CustomEvent(t,{bubbles:o.bubbles===void 0||o.bubbles,cancelable:!!o.cancelable,composed:o.composed===void 0||o.composed,detail:r});e.dispatchEvent(a)})(this,"closed"),document.body.style.overflow=this._bodyOverflow,this.parentNode.removeChild(this)}get _isSameFirmware(){var e;return!!this._info&&(!((e=this.overrides)===null||e===void 0)&&e.checkSameFirmware?this.overrides.checkSameFirmware(this._manifest,this._info):this._info.firmware===this._manifest.name)}get _isSameVersion(){return this._isSameFirmware&&this._info.version===this._manifest.version}async _closeClientWithoutEvents(e){e.removeEventListener("disconnect",this._handleDisconnect),await e.close()}_preventDefault(e){e.preventDefault()}}J.styles=[ro,M`
      :host {
        --mdc-dialog-max-width: 390px;
      }
      div[slot="headline"] {
        padding-right: 48px;
      }
      ew-icon-button[slot="headline"] {
        position: absolute;
        right: 4px;
        top: 8px;
      }
      ew-icon-button[slot="headline"] svg {
        padding: 8px;
        color: var(--text-color);
      }
      .dialog-nav svg {
        color: var(--text-color);
      }
      .table-row {
        display: flex;
      }
      .table-row.last {
        margin-bottom: 16px;
      }
      .table-row svg {
        width: 20px;
        margin-right: 8px;
      }
      ew-filled-text-field,
      ew-filled-select {
        display: block;
        margin-top: 16px;
      }
      label.formfield {
        display: inline-flex;
        align-items: center;
        padding-right: 8px;
      }
      ew-list {
        margin: 0 -24px;
        padding: 0;
      }
      ew-list-item svg {
        height: 24px;
      }
      ewt-page-message + ew-list {
        padding-top: 16px;
      }
      .fake-icon {
        width: 24px;
      }
      .error {
        color: var(--danger-color);
      }
      .danger {
        --mdc-theme-primary: var(--danger-color);
        --mdc-theme-secondary: var(--danger-color);
        --md-sys-color-primary: var(--danger-color);
        --md-sys-color-on-surface: var(--danger-color);
      }
      button.link {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        text-align: left;
        text-decoration: underline;
        cursor: pointer;
      }
      :host([state="LOGS"]) ew-dialog {
        max-width: 90vw;
        max-height: 90vh;
      }
      ewt-console {
        width: calc(80vw - 48px);
        height: calc(90vh - 168px);
      }
    `],h([O()],J.prototype,"_client",void 0),h([O()],J.prototype,"_state",void 0),h([O()],J.prototype,"_installErase",void 0),h([O()],J.prototype,"_installConfirmed",void 0),h([O()],J.prototype,"_installState",void 0),h([O()],J.prototype,"_provisionForce",void 0),h([O()],J.prototype,"_error",void 0),h([O()],J.prototype,"_busy",void 0),h([O()],J.prototype,"_ssids",void 0),h([O()],J.prototype,"_selectedSsid",void 0),customElements.define("ewt-install-dialog",J);export{J as EwtInstallDialog};
